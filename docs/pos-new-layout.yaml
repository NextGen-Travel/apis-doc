openapi: 3.0.1

info:
  title: POS 新 Layout
  version: 1.0.0
  description: POS新Layout相關API

servers:
  - url: http://localhost:8000/project/public/pos-v2
  - url: https://erp-dev.cloudsatlas.com.hk/public

tags:
  - name: POS V2
    description: 新版POS相關API
  - name: POS V1
    description: 原生POS相關API

components:
  parameters:
    language:
      in: header
      name: accept-language
      schema:
        type: string
      required: false
      example: 'en'
  schemas:
    CustomersResponse:
      type: array
      items:
        type: object
        properties:
          id:
            type: number
            description: 客戶ID
          text:
            type: string
            description: 客戶名稱及ID
          mobile:
            type: string
            description: 手機
          address_line_1:
            type: string
            description: 地址1
          address_line_2:
            type: string
            description: 地址2
          city:
            type: string
          state:
            type: string
          country:
            type: string
          zip_code:
            type: string
          shipping_address:
            type: string
            description: 收件地址
          pay_term_number:
            type: string
          pay_term_type:
            type: string
          balance:
            type: string
          supplier_business_name:
            type: string
            description: 供應商名稱
          discount_percent:
            type: string
          price_calculation_type:
            type: string
          selling_price_group_id:
            type: string
          shipping_custom_field_details:
            type: string
          is_export:
            type: number
          export_custom_field_1:
            type: string
          export_custom_field_2:
            type: string
          export_custom_field_3:
            type: string
          export_custom_field_4:
            type: string
          export_custom_field_5:
            type: string
          export_custom_field_6:
            type: string
    CreateContact:
      type: object
      properties:
        type:
          type: string
          description: 類型
        contact_type_radio: 
          type: string
          description: 類型類別
        contact_id:
          type: string
        customer_group_id:
          type: integer
        supplier_business_name:
          type: string
          description: 供應商公司名稱
        prefix:
          type: string
          description: 稱謂
        first_name:
          type: string
          description: 名字
        middle_name:
          type: string
          description: 中間名
        last_name:
          type: string
          description: 姓氏
        mobile:
          type: string
          description: 行動電話號碼
        alternate_number:
          type: string
        landline:
          type: string
          description: 市話
        email:
          type: string
          description: 信箱
        dob:
          type: string
          description: 生日
        crm_source:
          type: string
        crm_life_stage:
          type: string
        position:
          type: string
        tax_number:
          type: string
        opening_balance:
          type: integer
        pay_term_number:
          type: string
        pay_term_type:
          type: string
        credit_limit:
          type: string
        address_line_1:
          type: string
          description: 地址1
        address_line_2:
          type: string
          description: 地址2
        city:
          type: string
          description: 縣市
        state:
          type: string
          description: 州
        country:
          type: string
          description: 國家
        zip_code:
          type: string
          description: 郵遞區號
        custom_field1:
          type: string
        custom_field2:
          type: string
        custom_field3:
          type: string
        custom_field4:
          type: string
        custom_field5:
          type: string
        custom_field6:
          type: string
        custom_field7:
          type: string
        custom_field8:
          type: string
        custom_field9:
          type: string
        custom_field10:
          type: string
        shipping_address:
          type: string
          description: 收件地址
      # Both properties are required
      required:  
        - type
    CreateContactResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            type:
              type: string
              description: 類型
            supplier_business_name:
              type: string
              description: 供應商公司名稱
            prefix:
              type: string
              description: 稱謂
            first_name:
              type: string
              description: 名字
            middle_name:
              type: string
              description: 中間名
            last_name:
              type: string
              description: 姓氏
            tax_number:
              type: string
            pay_term_number:
              type: string
            pay_term_type:
              type: string
            mobile:
              type: string
              description: 行動電話號碼
            landline:
              type: string
              description: 市話
            alternate_number:
              type: string
            city:
              type: string
              description: 縣市
            state:
              type: string
              description: 州
            country:
              type: string
              description: 國家
            address_line_1:
              type: string
              description: 地址1
            address_line_2:
              type: string
              description: 地址2
            customer_group_id:
              type: integer
            zip_code:
              type: string
              description: 郵遞區號
            contact_id:
              type: string
            custom_field1:
              type: string
            custom_field2:
              type: string
            custom_field3:
              type: string
            custom_field4:
              type: string
            custom_field5:
              type: string
            custom_field6:
              type: string
            custom_field7:
              type: string
            custom_field8:
              type: string
            custom_field9:
              type: string
            custom_field10:
              type: string
            email:
              type: string
              description: 信箱
            shipping_address:
              type: string
              description: 收件地址
            position:
              type: string
            dob:
              type: string
              description: 生日
            name:
              type: string
            business_id:
              type: integer
            created_by:
              type: integer
            credit_limit:
              type: integer
            updated_at:
              type: string
            created_at:
              type: string
        msg:
          type: string
        success:
          type: boolean
    ProductsResponse:
      type: array
      items:
        type: object
        properties:
          product_id:
            type: number
            description: 產品ID
          name:
            type: string
            description: 產品名稱
          type:
            type: string
            description: 產品類型
          enable_stock:
            type: boolean
            description: 是否啟用庫存管理
          variation_id:
            type: integer
            description: 產品衍生規格ID
          variation:
            type: string
            description: 衍生規格名稱
          selling_price:
            type: string
            description: 售價
          sub_sku:
            type: string
            description: Sub SKU
          unit:
            type: string
            description: 單位
          purchase_line_id:
            type: string
            description: 採購單ID
          lot_number:
            type: string
            description: 批號
          image_url:
            type: string
            description: 圖片URL
    SingleProductResponse:
      type: object
      properties:
        product_name:
          type: string
          description: 產品名稱
        product_id:
          type: integer
          description: 產品ID
        brand_id:
          type: integer
          description: 品牌ID
        sub_sku:
          type: string
          description: Sub SKU
        sell_price_inc_tax:
          type: string
          description: 售價(含稅)
        variation_id:
          type: integer
          description: 產品衍生規格ID
        qty_available:
          type: integer
          description: 庫存總量
        unit:
          type: string
          description: 單位
        unit_id:
          type: integer
          description: 單位ID
        brand:
          type: string
          description: 品牌名稱
        lot_numbers:
          description: 批號詳細資訊
          type: array
          items:
            type: object
            properties:
              purchase_line_id:
                type: integer
                description: 採購單ID
              lot_number:
                type: string
                description: 批號
              exp_date:
                type: string
                description: 過期日
              qty_available:
                type: integer
                description: 可用數量
              qty_formated:
                type: integer
                description: 格式化後的可用數量
    SuspendTxnResponse:
      type: array
      items:
        type: object
        properties:
          id:
            type: number
          transaction_date:
            type: string
          type:
            type: string
          is_direct_sale:
            type: number
          invoice_no:
            type: string
          invoice_no_text:
            type: string
          name:
            type: string
          mobile:
            type: string
          contact_id:
            type: string
          supplier_business_name:
            type: string
            description: 供應商公司名稱
          status:
            type: string
          payment_status:
            type: string
          final_total:
            type: string
          tax_amount:
            type: string
          discount_amount:
            type: string
          discount_type:
            type: string
          total_before_tax:
            type: string
          rp_redeemed:
            type: number
          rp_redeemed_amount:
            type: string
          rp_earned:
            type: number
          types_of_service_id:
            type: integer
          shipping_status:
            type: string
            description: 運輸狀態
          pay_term_number:
            type: integer
          pay_term_type:
            type: string
          additional_notes:
            type: string
            description: 額外註記
          staff_note:
            type: string
            description: 員工註記
          shipping_details:
            type: string
            description: 運輸細節
          document:
            type: string
          shipping_custom_field_1:
            type: string
          shipping_custom_field_2:
            type: string
          shipping_custom_field_3:
            type: string
          shipping_custom_field_4:
            type: string
          shipping_custom_field_5:
            type: string
          custom_field_1:
            type: string
          custom_field_2:
            type: string
          custom_field_3:
            type: string
          custom_field_4:
            type: string
          sale_date:
            type: string
          added_by:
            type: string
          total_paid:
            type: integer
            description: 已支付金額
          business_location:
            type: string
          return_exists:
            type: number
          return_paid:
            type: integer
            description: 退款金額
          amount_return:
            type: string
          return_transaction_id:
            type: integer
            description: 退款交易ID
          types_of_service_name:
            type: string
          service_custom_field_1:
            type: string
          total_items:
            type: number
          waiter:
            type: string
          table_name:
            type: string
          so_qty_remaining:
            type: string
          is_export:
            type: number
          shipping_location_to:
            type: string
          shipping_etd:
            type: string
            description: 預計發貨時間
          shipping_eta:
            type: string
            description: 預計抵達時間
          shipping_atd:
            type: string
            description: 實際發貨時間
          shipping_ata:
            type: string
            description: 實際抵達時間
          shipping_round_trip:
            type: string
            description: 趟次
          driver_id:
            type: integer
            description: 司機ID
          transporter_id:
            type: integer
            description: 貨車ID
          shipping_address:
            type: string
            description: 收貨地址
          delivered_to:
            type: string
          is_medicine:
            type: number
            description: 是否為藥品
          crm_is_order_request:
            type: number
          is_suspend:
            type: number
          res_table_id:
            type: integer
          res_waiter_id:
            type: integer
          sell_lines:
            type: array
            items:
              type: object
              properties:
                id:
                  type: number
                transaction_id:
                  type: number
                product_id:
                  type: number
                variation_id:
                  type: number
                quantity:
                  type: number
                mfg_waste_percent:
                  type: string
                mfg_ingredient_group_id:
                  type: integer
                quantity_returned:
                  type: string
                unit_price_before_discount:
                  type: string
                unit_price:
                  type: string
                line_discount_type:
                  type: string
                line_discount_amount:
                  type: string
                unit_price_inc_tax:
                  type: string
                item_tax:
                  type: string
                tax_id:
                  type: integer
                  description: 稅ID
                discount_id:
                  type: integer
                  description: 折扣ID
                lot_no_line_id:
                  type: integer
                sell_line_note:
                  type: string
                so_line_id:
                  type: integer
                so_quantity_invoiced:
                  type: string
                res_service_staff_id:
                  type: integer
                res_line_order_status:
                  type: string
                parent_sell_line_id:
                  type: string
                children_type:
                  type: string
                sub_unit_id:
                  type: integer
                  description: 子單位ID
                created_at:
                  type: string
                updated_at:
                  type: string
          table:
            type: string
          service_staff:
            type: string
    CustomTagsResponse:
      type: array
      items:
        type: string
    CreateTransaction:
      type: object
      properties:
        is_medicine:
          type: boolean
          description: 是否為配藥訂單
        location_id: 
          type: integer
          description: 營業地點ID
        sub_type:
          type: string
        contact_id:
          type: integer
          description: 客戶ID
        search_product:
          type: string
        pay_term_number:
          type: integer
        pay_term_type:
          type: string
        price_group:
          type: integer
        types_of_service_id:
          type: integer
        types_of_service_price_group:
          type: integer
        res_table_id:
          type: integer
        res_waiter_id:
          type: integer
        transporter_id:
          type: integer
        driver_id:
          type: integer
        sell_price_tax:
          type: string
        products:
          type: array
          items:
            type: object
            properties:
              product_type:
                type: string
                description: 產品類別
              unit_price:
                type: integer
                description: 單位價錢
              line_discount_type: 
                type: string
                description: 折扣類別
              line_discount_amount:
                type: integer
                description: 折扣金額
              item_tax:
                type: integer
              tax_id:
                type: integer
                description: 稅ID
              sell_line_note:
                type: string
                description: 銷售註記
              lot_no_line_id:
                type: integer
              product_id:
                type: integer
                description: 產品ID
              variation_id:
                type: integer
                description: 規格ID
              enable_stock:
                type: integer
                description: 是否有啟用庫存管理
              quantity:
                type: integer
                description: 數量
              product_unit_id:
                type: integer
                description: 產品單位ID
              sub_unit_id:
                type: integer
                description: 產品子單位ID
              base_unit_multiplier:
                type: integer
                description: 基本單位倍數
              unit_price_inc_tax:
                type: integer
                description: 含稅單位價錢
        discount_type:
          type: string
        discount_amount:
          type: integer
        rp_redeemed:
          type: integer
        rp_redeemed_amount:
          type: integer
        tax_rate_id:
          type: integer
        tax_calculation_amount:
          type: integer
        shipping_details:
          type: string
        shipping_address:
          type: string
        shipping_status:
          type: string
        delivered_to:
          type: string
        shipping_charges:
          type: integer
        advance_balance:
          type: integer
        payment:
          type: array
          items:
            type: object
            properties:
              amount:
                type: integer
                description: 交易總金額
              account_id:
                type: integer
              card_number:
                type: string
              card_holder_name:
                type: string
              card_transaction_number:
                type: string
              card_type:
                type: string
              card_month:
                type: integer
              card_year:
                type: integer
              card_security:
                type: string
              cheque_number:
                type: string
              bank_account_number:
                type: string
              transaction_no_1:
                type: string
              transaction_no_2:
                type: string
              transaction_no_3:
                type: string
              transaction_no_4:
                type: string
              transaction_no_5:
                type: string
              transaction_no_6:
                type: string
              transaction_no_7:
                type: string
              note:
                type: string
        sale_note:
          type: string
        staff_note:
          type: string
        change_return:
          type: integer
        additional_notes:
          type: string
        is_suspend:
          type: boolean
          description: 是否為暫存訂單
        recur_interval:
          type: integer
        recur_interval_type:
          type: string
        recur_repetitions:
          type: integer
        subscription_repeat_on:
          type: string
        size:
          type: string
        is_enabled_stock:
          type: boolean
        is_credit_sale:
          type: boolean
        final_total:
          type: integer
        discount_type_modal:
          type: string
        discount_amount_modal:
          type: integer
        order_tax_modal:
          type: string
        shipping_details_modal:
          type: string
        shipping_address_modal:
          type: string
        shipping_charges_modal:
          type: integer
        shipping_status_modal:
          type: integer
        delivered_to_modal:
          type: integer
        status:
          type: string
          description: 訂單狀態
      # Both properties are required
      required:  
        - location_id
        - contact_id
    TransactionsResponse:
      type: object
      properties:
        sussess:
          type: boolean
          description: 是否成功
        msg:
          type: string
          description: 訊息
        receipt:
          type: string
          description: 發票
    LocationInfoResponse:
      type: object
      properties:
        business_id:
          type: number
          description: 總店ID
        default_location_id:
          type: number
          description: 預設分店ID
        location_list:
          type: object
          properties:
            location_id:
              type: integer
              description: 分店ID
            location_name:
              type: string
              description: 分店名稱
        employee_id:
          type: number
          description: 店員ID
        employee_name:
          type: string
          description: 店員名稱

paths:
  
  /products:
    get:
      summary: 產品清單
      description: 取得產品清單
      tags:
        - POS V2
      parameters:
        - in: query
          name: location_id
          schema:
            type: integer
          description: 營業地點ID
        - in: query
          name: term
          schema:
            type: string
          description: 搜尋關鍵字
        - in: query
          name: tag_id
          schema:
            type: integer
            minimum: 1
            maximum: 5
          description: 客戶自訂產品標籤ID
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductsResponse'
              example:
                - product_id: 70
                  name: 可樂
                  type: single
                  enable_stock: 1
                  variation_id: 119
                  variation: DUMMY
                  qty_available: 2232.0000
                  selling_price: 125.0000
                  sub_sku: 0070
                  unit: Pc(s)
                  purchase_line_id: 70
                  lot_number:
                  image_url: http://localhost:8000/project/public/img/default.png
                - product_id: 71
                  name: 黑松沙士
                  type: single
                  enable_stock: 1
                  variation_id: 120
                  variation: DUMMY
                  qty_available: 1010.0000
                  selling_price: 250.0000
                  sub_sku: 0071
                  unit: Pc(s)
                  purchase_line_id: 68
                  lot_number: Batch111
                  image_url: http://localhost:8000/project/public/img/default.png
  /products/{variation_id}:
    get:
      summary: 取得單一產品詳細資訊
      description: | 
        取得單一產品詳細資訊
      tags:
        - POS V2
      parameters:
        - in: query
          name: location_id
          schema:
            type: integer
          description: 分店ID
          required: true
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SingleProductResponse'
              example:
                product_name: "百事可樂"
                product_id: 103
                brand_id: 2
                sub_sku: 0103
                sell_price_inc_tax: 25.0000
                variation_id: 155
                qty_available: 54
                unit: Pc(s)
                unit_id: 4
                brand: Adidas
                lot_numbers:
                  - exp_date: "2023-08-31"
                    lot_number: "batch111"
                    purchase_line_id: 114
                    qty_available: "27.0000"
                    qty_formated: "27.00"
                  - exp_date:
                    lot_number: "batch222"
                    purchase_line_id: 115
                    qty_available: "26.0000"
                    qty_formated: "26.00"
                
                
  /custom-tags:
    get:
      summary: 客戶自訂產品標籤
      description: 取得客戶自訂產品標籤
      tags:
        - POS V2
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomTagsResponse'
              example:
                - 熱銷
                - 促銷
                - 打折
                - 清倉
                - 週年慶
  /location-info:
    get:
      summary: 取得店家資訊
      description: 取得全部店家資訊以及預設店家及營業員
      tags:
        - POS V2
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationInfoResponse'
              example:
                business_id: 1
                default_location_id: 1
                location_list: 
                  1: "分店A (BL0001)"
                  2: "分店B (BL0002)"
                  3: "分店C (BL0003)"
                employee_id: 1
                employee_name: "Laplace chen"



  /sells:
    get:
      summary: 暫存訂單列表
      description: | 
        取得暫存訂單列表

        pos_v2=1時會以Json格式回傳資料

        pos_v2=0時會以HTML格式回傳資料
      tags:
        - POS V1
      parameters:
        - in: query
          name: suspended
          schema:
            type: boolean
            default: true
          description: 是否為暫存訂單
          required: true
        - in: query
          name: pos_v2
          schema:
            type: boolean
            default: true
          description: 是否為新版POS頁面
          required: true
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuspendTxnResponse'
              example:
                - id: 1
                  text: Walk-in (CO0001)
                  mobile: 0934987146
                  address_line_1:
                  address_line_2:
                  city:
                  state:
                  country:
                  zip_code:
                  shipping_address:
                  pay_term_number:
                  pay_term_type:
                  balance:
                  supplier_business_name:
                  discount_percent:
                  price_calculation_type:
                  selling_price_group_id:
                  shipping_custom_field_details:
                  is_export: 0
                  export_custom_field_1:
                  export_custom_field_2:
                  export_custom_field_3:
                  export_custom_field_4:
                  export_custom_field_5:
                  export_custom_field_6:
                - id: 2
                  text: Miss jojo Lin (CO0002)
                  mobile: 0966123458
                  address_line_1:
                  address_line_2:
                  city:
                  state:
                  country:
                  zip_code:
                  shipping_address:
                  pay_term_number:
                  pay_term_type:
                  balance: 0.0000
                  supplier_business_name:
                  discount_percent:
                  price_calculation_type:
                  selling_price_group_id:
                  shipping_custom_field_details:
                  is_export: 0
                  export_custom_field_1:
                  export_custom_field_2:
                  export_custom_field_3:
                  export_custom_field_4:
                  export_custom_field_5:
                  export_custom_field_6:
  /contacts/customers:
    get:
      summary: 會員清單
      description: 取得會員清單
      tags:
        - POS V1
      parameters:
        - in: query
          name: q
          schema:
            type: string
          description: keyword
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomersResponse'
              example:
                - id: 1
                  text: Walk-in (CO0001)
                  mobile: 0934987146
                  address_line_1:
                  address_line_2:
                  city:
                  state:
                  country:
                  zip_code:
                  shipping_address:
                  pay_term_number:
                  pay_term_type:
                  balance:
                  supplier_business_name:
                  discount_percent:
                  price_calculation_type:
                  selling_price_group_id:
                  shipping_custom_field_details:
                  is_export: 0
                  export_custom_field_1:
                  export_custom_field_2:
                  export_custom_field_3:
                  export_custom_field_4:
                  export_custom_field_5:
                  export_custom_field_6:
                - id: 2
                  text: Miss jojo Lin (CO0002)
                  mobile: 0966123458
                  address_line_1:
                  address_line_2:
                  city:
                  state:
                  country:
                  zip_code:
                  shipping_address:
                  pay_term_number:
                  pay_term_type:
                  balance: 0.0000
                  supplier_business_name:
                  discount_percent:
                  price_calculation_type:
                  selling_price_group_id:
                  shipping_custom_field_details:
                  is_export: 0
                  export_custom_field_1:
                  export_custom_field_2:
                  export_custom_field_3:
                  export_custom_field_4:
                  export_custom_field_5:
                  export_custom_field_6:
  /contacts:
    post:
      summary: 新增會員
      description: 新增會員
      tags:
        - POS V1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateContact'
            example:
              type: 'customer' 
              contact_type_radio: 'individual'
              contact_id: ''
              customer_group_id: ''
              supplier_business_name: ''
              prefix: 'Mr'
              first_name: 'aaaa'
              middle_name: 'hahaha'
              last_name: 'Lin'
              mobile: '0938145265'
              alternate_number: ''
              landline: ''
              email: '12345@nextgen.com.hk'
              dob: '12/06/2022'
              crm_source: ''
              crm_life_stage: ''
              position: ''
              tax_number: ''
              opening_balance: 0
              pay_term_number: ''
              pay_term_type: ''
              credit_limit: ''
              address_line_1: ''
              address_line_2: ''
              city: ''
              state: ''
              country: ''
              zip_code: ''
              custom_field1: ''
              custom_field2: ''
              custom_field3: ''
              custom_field4: ''
              custom_field5: ''
              custom_field6: ''
              custom_field7: ''
              custom_field8: ''
              custom_field9: ''
              custom_field10: ''
              shipping_address: ''
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CreateContact'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateContactResponse'
              example:
                data:
                  type: customer
                  supplier_business_name:
                  prefix: Mr
                  first_name: "Stock"
                  middle_name: "haha"
                  last_name: "Liu"
                  tax_number:
                  pay_term_number:
                  pay_term_type:
                  mobile: 0963254789
                  landline:
                  alternate_number:
                  city:
                  state:
                  country:
                  address_line_1:
                  address_line_2:
                  customer_group_id:
                  zip_code:
                  contact_id: CO0066
                  custom_field1:
                  custom_field2:
                  custom_field3:
                  custom_field4:
                  custom_field5:
                  custom_field6:
                  custom_field7:
                  custom_field8:
                  custom_field9:
                  custom_field10:
                  email: qqq.gmail.com
                  shipping_address:
                  position:
                  dob: 2022-12-06
                  name: Mr Stock haha Liu
                  business_id: 1
                  created_by: 1
                  credit_limit:
                  updated_at: 2022/12/16 12:15:00
                  created_at: 2022/12/16 12:15:00
                success: 1
                msg: Contact added successfully
                
  /products/list:
    get:
      summary: 取得產品列表
      description: 在POS頁面的搜尋產品欄輸入關鍵字便會搜尋符合的產品
      tags:
        - POS V1
      parameters:
        - in: query
          name: price_group
          schema:
            type: integer
          description: 價格群組ID
        - in: query
          name: location_id
          schema:
            type: integer
          description: 營業地點ID
        - in: query
          name: term
          schema:
            type: string
          description: 搜尋關鍵字
        - in: query
          name: not_for_selling
          schema:
            type: boolean
            default: false
          description: 是否為非賣品
        - in: query
          name: search_fields
          schema:
            type: array
            items:
              type: string
          description:  搜尋欄位名稱
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductsResponse'
              example:
                - product_id: 70
                  name: 可樂
                  type: single
                  enable_stock: 1
                  variation_id: 119
                  variation: DUMMY
                  qty_available: 2232.0000
                  selling_price: 125.0000
                  sub_sku: 0070
                  unit: Pc(s)
                  purchase_line_id: 70
                  lot_number:
                  image_url: http://localhost:8000/project/public/img/default.png
                - product_id: 71
                  name: 黑松沙士
                  type: single
                  enable_stock: 1
                  variation_id: 120
                  variation: DUMMY
                  qty_available: 1010.0000
                  selling_price: 250.0000
                  sub_sku: 0071
                  unit: Pc(s)
                  purchase_line_id: 68
                  lot_number: Batch111
                  image_url: http://localhost:8000/project/public/img/default.png
  /sells/pos/get-product-suggestion:
    get:
      summary: 取得建議產品列表
      description: 在POS首頁會顯示建議產品的清單
      tags:
        - POS V1
      parameters:
        - in: query
          name: category_id
          schema:
            type: integer
          description: 類別ID
        - in: query
          name: brand_id
          schema:
            type: integer
          description: 品牌ID
        - in: query
          name: location_id
          schema:
            type: integer
            minimum: 1
          description: 營業地點ID
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
          description: 分頁頁數
        - in: query
          name: is_enabled_stock
          schema:
            type: integer
          description:  是否有啟用庫存管理
        - in: query
          name: repair_model_id
          schema:
            type: integer
      responses:
        '200':
          description: 成功，回傳HTML
  /sells/pos/get_product_row:
    get:
      summary: 取得產品詳細資訊
      description: 取得產品詳細資訊(回傳格式為HTML)
      tags:
        - POS V1
      parameters:
        - in: query
          name: product_row
          schema:
            type: integer
        - in: query
          name: customer_id
          schema:
            type: integer
          description: 客戶ID
        - in: query
          name: is_direct_sell
          schema:
            type: boolean
          description: 是否是POS銷售(0=POS銷售, 1=直接銷售)
        - in: query
          name: price_group
          schema:
            type: integer
          description: 價格群組
        - in: query
          name: purchase_line_id
          schema:
            type: integer
        - in: query
          name: weighing_scale_barcode
          schema:
            type: string
        - in: query
          name: quantity
          schema:
            type: integer
          description: 數量
        - in: query
          name: is_sales_order
          schema:
            type: boolean
      responses:
        '200':
          description: 成功
  /pos:
    post:
      summary: 建立訂單
      description: | 
        建立POS訂單.

        當is_suspend=1則會儲存為暫存訂單.
      tags:
        - POS V1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTransaction'
            example:
              is_medicine: 0
              location_id: 1
              sub_type:
              contact_id: 1
              search_product:
              pay_term_number:
              pay_term_type: 
              price_group: 0,
              types_of_service_id: 
              types_of_service_price_group: 
              res_table_id: 
              res_waiter_id: 
              transporter_id: 
              driver_id: 
              sell_price_tax: "includes"
              products:
                - product_type: "single"
                  unit_price: 125.00
                  line_discount_type: "fixed"
                  line_discount_amount: 0.00
                  item_tax: 0.00
                  tax_id:
                  sell_line_note:
                  lot_no_line_id:
                  product_id: 70
                  variation_id: 119
                  enable_stock: 1
                  quantity: 5.00
                  product_unit_id: 1
                  sub_unit_id: 1
                  base_unit_multiplier: 1
                  unit_price_inc_tax: 125.0
              discount_type: "percentage"
              discount_amount: 0.00
              rp_redeemed: 0
              rp_redeemed_amount: 0
              tax_rate_id:
              tax_calculation_amount: 0.00
              shipping_details: 
              shipping_address: 
              shipping_status: 
              delivered_to: 
              shipping_charges: 0.00
              advance_balance: 0.0000
              payment:
                - amount: 625.00
                  account_id: 
                  card_number: 
                  card_holder_name: 
                  card_transaction_number: 
                  card_type: 'credit'
                  card_month: 
                  card_year: 
                  card_security: 
                  cheque_number:
                  bank_account_number: 
                  transaction_no_1:
                  transaction_no_2:
                  transaction_no_3:
                  transaction_no_4:
                  transaction_no_5:
                  transaction_no_6:
                  transaction_no_7:
                  note:
              sale_note: 
              staff_note: 
              change_return: 0.00
              additional_notes: 'axios post test'
              is_suspend: 1  # 1 = 暫存訂單, 0 = 一般訂單
              recur_interval: 
              recur_interval_type: "days"
              recur_repetitions: 
              subscription_repeat_on: 
              size: 'all'
              is_enabled_stock: 
              is_credit_sale: 0
              final_total: 625.00
              discount_type_modal: 'percentage'
              discount_amount_modal: 0.00
              order_tax_modal: 
              shipping_details_modal:
              shipping_address_modal:
              shipping_charges_modal: 0
              shipping_status_modal: 
              delivered_to_modal: 
              status: 'final'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CreateTransaction'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionsResponse'
              example:
                success: 1
                msg: Sale added successfully
                receipt: null
