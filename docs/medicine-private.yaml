openapi: 3.0.1

info:
  title: 配藥系統
  version: 1.0.0

servers:
  - url: https://medicine-api-dev.cloudsatlas.com.hk/api
  - url: https://medicine-api-stage.cloudsatlas.com.hk/api
  - url: https://medicine-api.cloudsatlas.com.hk/api

components:
  securitySchemes:
    client_token:
      in: header
      type: apiKey
      name: Authorization
      description: 驗證需要的 token, Bearer xxx
  parameters:
    page:
      in: query
      name: page
      schema:
        type: number
      required: true
      example: 1
    language:
      in: header
      name: accept-language
      schema:
        type: string
      required: false
      example: 'en'
    customerExpand:
      in: query
      name: expand
      schema:
        type: string
      description: 擴展customer 輸出內容
      example: 'store,allergy'
  schemas:
    customer:
      type: object
      properties:
        accountNo:
          type: string
          description: 身份識別碼
          example: 'a1234567'
        name:
          type: string
          description: 顧客名稱
          example: '顧客名稱'
        gender:
          type: string
          description: 性別
          example: 'F'
        birthday:
          type: string
          description: 生日
          example: '2021-01-01'
        address:
          type: string
          description: 地址
          example: '大安區'
        email:
          type: string
          description: 電子郵件
          example: 'pharmacist@nextgen.com.hk'
        mobile:
          type: string
          description: 行動電話
          example: '12345'
        phoneNumber:
          type: string
          description: 電話號碼
          example: '12221222'
        language:
          type: string
          description: 客人的慣用語言
          example: 'zh'
        drugTaboo:
          type: string
          description: 禁忌
          example: '特定藥品禁忌'
        allergyDrug:
          type: array
          items:
            type: integer
          description: 藥品id
          example: ['6595', '6597']
        drugNote:
          type: array
          items:
            type: string
          description: 備註
          example: ['', '過敏']
        allergyIngredient:
          type: array
          items:
            type: string
          description: 過敏成分
          example: ['zolmitriptan', 'zopiclone']
        ingredientNote:
          type: array
          items:
            type: string
          description: 備註
          example: ['', '起疹子']
    customerResponse:
      type: object
      properties:
        id:
          type: number
        uuid:
          type: string
        gender:
          type: string
        address:
          type: string
        email:
          type: string
        birthday:
          type: string
        name:
          type: string
        mobile:
          type: string
        accountNo:
          type: string
        drugTaboo:
          type: string
        store:
          type: object
          properties:
            id:
              type: number
            rxNo:
              type: string
            nameCn:
              type: string
            nameEn:
              type: string
            district:
              type: string
        allergyDrugs:
          type: array
          items:
            type: object
            properties:
              id:
                type: number
              note:
                type: string
              drug:
                type: object
                properties:
                  id:
                    type: number
                  permitNo:
                    type: string
                  productName:
                    type: string
        allergyIngredients:
          type: array
          items:
            type: object
            properties:
              id:
                type: number
              note:
                type: string
              ingredient:
                type: object
                properties:
                  id:
                    type: number
                  name:
                    type: string
    userResponse:
      type: object
      required:
        - "id"
        - "account"
        - "username"
        - "email"
        - "provider"
        - "confirmed"
        - "blocked"
        - "createdAt"
        - "updatedAt"
        - "isPharmacist"
        - "level"
        - "role"
      properties:
        id:
          type: number
        account:
          type: string
        username:
          type: string
        email:
          type: string
        provider:
          type: string
        confirmed:
          type: boolean
        blocked:
          type: boolean
        createdAt:
          type: string
        updatedAt:
          type: string
        isPharmacist:
          type: boolean
        level:
          type: string
        role:
          type: object
          required:
            - "id"
            - "name"
            - "description"
            - "type"
          properties:
            id:
              type: number
            name:
              type: string
            description:
              type: string
            type:
              type: string
    packageResponse :
      type: object
      properties:
        name:
          type: string
        sku:
          type: string
        dosage:
          type: string
        dosageForm:
          type: string
        usage:
          type: string
        unit:
          type: string
    drugUpdateApplyRevise :
      type: object
      required: ['']
      properties:
        indication:
          type: string
          description: 適應症狀
          example: '頭痛、發燒'
        precaution:
          type: string
          description: 預防措施(注意事項)
          example: '服用後建議不要開車'
        side_effect:
          type: string
          description: 副作用
          example: '注意力不集中'
        productName_zh:
          type: string
          description: 俗名
          example: '退燒藥'
        images:
          type: array
          items:
            type: integer
          description: 團檔 id
          example: [1]
        sku:
          type: array
          items:
            type: string
          description: 商品編碼
          example: ['adasdasdsad', 'sdsdsd']
        packageName:
          type: array
          items:
            type: string
          description: 包裝名稱
          example: ['三十片裝', '十片裝']
        dosageForm:
          type: array
          items:
            type: string
          description: 藥劑類型
          example: ['tablet', 'capsule']
        usage:
          type: array
          items:
            type: string
          description: 藥品使用方式
          example: ['oral','external']
        dosage:
          type: array
          items:
            type: integer
          description: 藥品劑量
          example: [1,1]
        unit:
          type: array
          items:
            type: string
          description: 藥品單位
          example: ['tablet','tablet']
        packageImages:
          type: array
          items:
            type: array
            items: 
              type: integer
          nullable: true
          description: 團檔 id
          example: [[1],[3]]
    drugUpdateRevise :
      type: object
      properties:
        indication:
          type: string
          description: 適應症狀
          example: '頭痛、發燒'
        precaution:
          type: string
          description: 預防措施(注意事項)
          example: '服用後建議不要開車'
        side_effect:
          type: string
          description: 副作用
          example: '注意力不集中'
        productName_zh:
          type: string
          description: 俗名
          example: '退燒藥'
        images:
          type: array
          items:
            type: integer
          description: 團檔 id
          example: [1]
        uuidArr:
          type: array
          items:
            type: string
          description: 審核的uuid
          example: ['685cc162-b2bf-4fcc-879b-41e05c11d43d']
        sku:
          type: array
          items:
            type: string
          description: 商品編碼
          example: ['adasdasdsad', 'sdsdsd']
        packageName:
          type: array
          items:
            type: string
          description: 包裝名稱
          example: ['三十片裝', '十片裝']
        dosageForm:
          type: array
          items:
            type: string
          description: 藥劑類型
          example: ['tablet', 'capsule']
        usage:
          type: array
          items:
            type: string
          description: 藥品使用方式
          example: ['oral','external']
        dosage:
          type: array
          items:
            type: integer
          description: 藥品劑量
          example: [1,1]
        unit:
          type: array
          items:
            type: string
          description: 藥品單位
          example: ['tablet','tablet']
        packageImages:
          type: array
          items:
            type: array
            items: 
              type: integer
          nullable: true
          description: 團檔 id
          example: [[1],[3]]
    drugUpdateResponse :
      type: object
      properties:
        id:
          type: number
        uuid:
          type: string
        status:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
        revise:
          type: object
          properties:
            indication:
              type: string
            prevention:
              type: string
            side_effect:
              type: string
            product_name_zh:
              type: string
            images:
              type: array
              items:
                type: number
            packages:
              type: array
              items:
                $ref : "#/components/schemas/packageResponse"
        before:
          type: object
          properties:
            indication:
              type: string
            prevention:
              type: string
            side_effect:
              type: string
            product_name_zh:
              type: string
            images:
              type: array
              items:
                type: number
            packages:
              type: array
              items:
                $ref : "#/components/schemas/packageResponse"
    storeForm :
      type: object
      properties:
        data[nameCn]:
          type: string
          description: 藥局名稱(中文}
          example: '大安藥局'
        data[nameEn]:
          type: string
          description: 藥局名稱(英文}
          example: '大安藥局'
        data[tel]:
          type: string
          description: 聯絡電話
          example: '1234567890'
        data[address]:
          type: string
          description: 地址
          example: '安和路'
        data[district]:
          type: string
          description: 區域
          example: '大安區'
        data[rxNo]:
          type: string
          description: rxNo
          example: 'NO001'
        data[enable]:
          type: boolean
          description: 是否啟用
          example: true
    store :
      type: object
      properties:
        data:
          type: object
          properties:
            nameCn:
              type: string
              description: 藥局名稱(中文}
              example: '大安藥局'
            nameEn:
              type: string
              description: 藥局名稱(英文}
              example: '大安藥局'
            tel:
              type: string
              description: 聯絡電話
              example: '1234567890'
            address:
              type: string
              description: 地址
              example: '安和路'
            district:
              type: string
              description: 區域
              example: '大安區'
            rxNo:
              type: string
              description: rxNo
              example: 'NO001'
            finishedAt:
              type: string
              description: 結束日期
              example: '2022-12-01'
            enable:
              type: boolean
              description: 是否啟用
              example: true
            SSO:
              type: boolean
              description: 是否啟用 SSO
              example: true
            appId:
              type: string
              description: 若 SSO=true 要有 appId
            accessKey:
              type: string
              description: 若 SSO=true 要有 accessKey
    storeResponse :
      type: object
      properties:
        data:
          type: object
          properties:
            id:
              type: number
            attributes:
              type: object
              properties:
                nameEn:
                  type: string
                rxNo:
                  type: string
                tel:
                  type: string
                district:
                  type: string
                address:
                  type: string
                createdAt:
                  type: string
                updatedAt:
                  type: string
                publishedAt:
                  type: string
                nameCn:
                  type: string
                enable:
                  type: boolean
    orderResponse :
      type: object
      properties:
        id:
          type: number
        signAt:
          type: string
        customerName:
          type: string
        doctorName:
          type: string
        prescriptionSignMessage:
          type: object
        hospitalName:
          type: string
        createdAt:
          type: string
        updatedAt:
          type: string
        orderNo:
          type: string
        lang:
          type: string

paths:
  # ====================
  #
  # Auth
  #

  /users-permissions/auth/renew:
    post:
      summary: 更新jwt 有效間
      tags:
        - auth
      security:
        - client_token: []
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      jwt:
                        type: string

  # ====================
  #
  # stores
  #
  /stores :
    post:
      summary: 新增藥房
      tags:
        - stores
      security:
        - client_token: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/store'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/storeForm'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/storeResponse'
        '500':
          description: 失敗，因為 SSO = true 卻沒有帶 accessKey, appId
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      error:
                        type: object
                        properties:
                          status:
                            type: number
                          name:
                            type: string
                          message:
                            type: string

  /stores/sync :
    post:
      summary: 新增藥房時跟 CAS 拿 accessKey
      tags:
        - stores
      security:
        - client_token: []
      parameters:
        - in: query
          name: appId
          schema:
            type: string
          description: 藥房的 appId
          example: '6f046e51-fd54-4749-b3ac-68e8a37f5e8'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      SSO:
                        type: boolean
                      accessKey:
                        type: string
  /stores/sync/cas :
    post:
      summary: 給 CAS 在那邊的 store 資料有變動時打的
      tags:
        - stores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                  description: 加密的資料
                  example: 806df46463b15b09323a38ac032e016f:f7a943960b3d2a0be0e06ddb2a5b01f25dab5275ea2de22dcad727d8cef3039121f9162abd9a18d3a6ad8c54b6c85a623d8e90887cede8b0d462c9cfb56c2d0e687ab4cc3f268cdf1ecdfc0ac8fb25ab1a252879a7085f4b9b6ea1da11bc988581719a98bdbcf5fd05958ef921b36726742c3f12ced4f23bdaa11973c46984ada39670ee2a971f7c2e1f1e879c8938f54dbbfdf521a96a531e744be5becead3deb7b5cf080cf99f13449350c23a1afb42bc50095f6dbeec9024eaecc0a9a88c56b0b83211c42e2fcb1b3cb85146b669baca6b945afd47c41dc2baa4f9f514e56
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: boolean

  /stores/{id} :
    put:
      summary: 修改 藥房
      tags:
        - stores
      security:
        - client_token: []
      parameters:
        - name: id
          in: path
          description: 藥房id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/store'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/storeForm'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/storeResponse'


  # ====================
  #
  # user
  #

  /users :
    post:
      summary: 新增員工
      tags:
        - users
      security:
        - client_token: []
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                account:
                  type: string
                  description: 帳號
                  example: 'dev'
                username:
                  type: string
                  description: 員工姓名
                  example: 'dev 員工'
                email:
                  type: string
                  description: 電子郵件
                  example: 'dev@nextgen.com.hk'
                password:
                  type: string
                  description: 密碼
                  example: '1234567890'
                level:
                  type: string
                  description: 員工身份 staff or admin
                  example: 'staff'
                isPharmacist:
                  type: boolean
                  description: 是否為藥劑師
                  example: fasle
                startedAt:
                  type: string
                  description: 開始日期
                  example: '2022-01-01'
                finishedAt:
                  type: string
                  description: 結束日期
                  example: '2022-12-01'
                blocked:
                  type: boolean
                  description: 狀態(啟用/停用)
                  example: true
                memo:
                  type: string
                  description: 備註
                  example: '備註'
                store:
                  type: integer
                  description: 指定藥房(需 level 為  superadmin 變動才會生效 )
                  example: 2
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/userResponse'
  /users/{id} :
    put:
      summary: 修改 員工資料
      tags:
        - users
      security:
        - client_token: []
      parameters:
        - name: id
          in: path
          description: 員工id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              required:
                - username
                - email
                - level
                - isPharmacist
                - startedAt
                - finishedAt
                - blocked
                - memo
              properties:
                username:
                  type: string
                  description: 員工姓名
                  example: 'dev'
                email:
                  type: string
                  description: 電子郵件
                  example: 'pharmacist@nextgen.com.hk'
                password:
                  type: string
                  description: 密碼
                  example: '1234567890'
                level:
                  type: string
                  description: 員工身份 staff or admin
                  example: 'staff'
                isPharmacist:
                  type: boolean
                  description: 是否為藥劑師
                  example: fasle
                startedAt:
                  type: string
                  description: 開始日期
                  example: '2022-01-01'
                finishedAt:
                  type: string
                  description: 結束日期
                  example: '2022-12-01'
                blocked:
                  type: boolean
                  description: 狀態(啟用/停用)
                  example: true
                memo:
                  type: string
                  description: 備註
                  example: '備註'
                store:
                  type: integer
                  description: 指定藥房(需 level 為  superadmin 變動才會生效 )
                  example: 2
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/userResponse'

  /users/me :
    get:
      summary: 取得個人資訊
      tags:
        - users
      security:
        - client_token: []
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/userResponse'
                  - type: object
                    required:
                      - "store"
                    properties:
                      store:
                        type: object
                        required:
                          - "id"
                          - "nameEn"
                          - "nameCn"
                          - "rxNo"
                          - "tel"
                          - "district"
                          - "address"
                          - "enable"
                        properties:
                          id:
                            type: number
                          nameEn:
                            type: string
                          nameCn:
                            type: string
                          rxNo:
                            type: string
                          tel:
                            type: string
                          district:
                            type: string
                          address:
                            type: string
                          enable:
                            type: boolean

  # ====================
  #
  # customer
  #

  /customers:
    get:
      summary: 客人搜尋
      tags:
        - customers
      security:
        - client_token: []
      parameters:
        - $ref: '#/components/parameters/customerExpand'
        - in: query
          name: email
          schema:
            type: string
          description: 電子郵件
          example: 'pharmacist@nextgen.com.hk'
        - in: query
          name: mobile
          schema:
            type: string
          description: 行動電話
          example: '1222'
        - in: query
          name: phoneNumber
          schema:
            type: string
          description: 電話號碼
          example: '12221222'
        - in: query
          name: accountNo
          schema:
            type: string
          description: 身份識別碼
          example: 'a1234567'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/customerResponse'
                  meta:
                    type: object
                    properties:
                      page:
                        type: number
                      perPage:
                        type: number
                      pageCount:
                        type: number
                      totalCount:
                        type: number

    post:
      summary: 新建客人
      security:
        - client_token: []
      tags:
        - customers
      parameters:
        - $ref: '#/components/parameters/customerExpand'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/customer'
          application/x-www-form-urlencoded:
            encoding :
              allergyDrug :
                style : form
                explode : true
              drugNote :
                style : form
                explode : true
              allergyIngredient :
                style : form
                explode : true
              ingredientNote :
                style : form
                explode : true
            schema:
              $ref: '#/components/schemas/customer'

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    $ref: '#/components/schemas/customerResponse'

  /customers/{uuid}:
    put:
      summary: 修改客人資訊
      tags:
        - customers
      security:
        - client_token: []
      parameters:
        - $ref: '#/components/parameters/customerExpand'
        - name: uuid
          in: path
          description: 客人唯一識別碼
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/customer'
          application/x-www-form-urlencoded:
            encoding :
              allergyDrug :
                style : form
                explode : true
              drugNote :
                style : form
                explode : true
              allergyIngredient :
                style : form
                explode : true
              ingredientNote :
                style : form
                explode : true
            schema:
              $ref: '#/components/schemas/customer'

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    $ref: '#/components/schemas/customerResponse'

  # ====================
  #
  # order
  #

  /orders:
    post:
      summary: 新建訂單
      security:
        - client_token: []
      tags:
        - orders
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            encoding :
              drug[] :
                style : form
                explode : true
              days[] :
                style : form
                explode : true
              frequency[] :
                style : form
                explode : true
              usage[] :
                style : form
                explode : true
              total[] :
                style : form
                explode : true
              dosageForm[] :
                style : form
                explode : true
              dosage[] :
                style : form
                explode : true
              unit[] :
                style : form
                explode : true
              customCaution[] :
                style : form
                explode : true
              cautions[]  :
                style : form
                explode : true
            schema:
              type: object
              properties:
                customerUuid:
                  type: string
                  description:  顧客身份 uuid
                  example: 'c764f34b-dd29-454d-9fa0-db9a08e04607'
                signAt:
                  type: string
                  description: 配藥日期
                  example: '2021-01-01'
                hospital:
                  type: string
                  description: 開藥醫院 id
                  example: '334'
                doctorName:
                  type: string
                  description: 開藥醫生
                  example: '醫生名稱'
                prescriptionSignMessage:
                  type: string
                  description: 處方簽症狀
                  example: '治療發燒、喉嚨痛'
                lang:
                  type: string
                  description: 紀錄語系 zh、en
                  example: 'zh'
                drug[]:
                  type: array
                  items:
                    type: integer
                  description: 藥品id
                  example: ['6595', '6597']
                days[]:
                  type: array
                  items:
                    type: integer
                  description: 用藥天數
                  example: ['3','3']
                frequency[]:
                  type: array
                  items:
                    type: string
                  description: 用藥頻率
                  example: ['take_morning_and_night','take_after_meals']
                usage[]:
                  type: array
                  items:
                    type: string
                  description: 藥品使用方式
                  example: ['oral','external']
                total[]:
                  type: array
                  items:
                    type: integer
                  description: 藥品數量
                  example: [6,9]
                dosageForm[]:
                  type: array
                  items:
                    type: string
                  description: 藥劑類型
                  example: ['tablet', 'capsule']
                dosage[]:
                  type: array
                  items:
                    type: integer
                  description: 藥品劑量
                  example: [1,1]
                unit[]:
                  type: array
                  items:
                    type: string
                  description: 藥品單位
                  example: ['tablet','tablet']
                customCaution[]:
                  type: array
                  items:
                    type: string
                  description: 自訂警告
                  example: ['', '服用時禁止空腹']
                cautions[]:
                  type: array
                  items:
                    type: string
                  description: 警告 id
                  example: ['33,32', '']
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    $ref: "#/components/schemas/orderResponse"
  /orders/{orderNo}:
    put:
      summary: 修改訂單
      security:
        - client_token: []
      parameters:
        - name: orderNo
          in: path
          description: 訂單唯一識別碼
          required: true
          schema:
            type: string
      tags:
        - orders
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            encoding :
              drug[] :
                style : form
                explode : true
              days[] :
                style : form
                explode : true
              frequency[] :
                style : form
                explode : true
              usage[] :
                style : form
                explode : true
              total[] :
                style : form
                explode : true
              dosageForm[] :
                style : form
                explode : true
              dosage[] :
                style : form
                explode : true
              unit[] :
                style : form
                explode : true
              customCaution[] :
                style : form
                explode : true
              cautions[]  :
                style : form
                explode : true
            schema:
              type: object
              properties:
                customerUuid:
                  type: string
                  description:  顧客身份 uuid
                  example: 'c764f34b-dd29-454d-9fa0-db9a08e04607'
                signAt:
                  type: string
                  description: 配藥日期
                  example: '2021-01-01'
                hospital:
                  type: string
                  description: 開藥醫院 id
                  example: '334'
                doctorName:
                  type: string
                  description: 開藥醫生
                  example: '醫生名稱'
                prescriptionSignMessage:
                  type: string
                  description: 處方簽症狀
                  example: '治療發燒、喉嚨痛'
                lang:
                  type: string
                  description: 紀錄語系 zh、en
                  example: 'zh'
                drug[]:
                  type: array
                  items:
                    type: integer
                  description: 藥品id
                  example: ['6595', '6597']
                days[]:
                  type: array
                  items:
                    type: integer
                  description: 用藥天數
                  example: ['3','3']
                frequency[]:
                  type: array
                  items:
                    type: string
                  description: 用藥頻率
                  example: ['take_morning_and_night','take_after_meals']
                usage[]:
                  type: array
                  items:
                    type: string
                  description: 藥品使用方式
                  example: ['oral','external']
                total[]:
                  type: array
                  items:
                    type: integer
                  description: 藥品數量
                  example: [6,9]
                dosageForm[]:
                  type: array
                  items:
                    type: string
                  description: 藥劑類型
                  example: ['tablet', 'capsule']
                dosage[]:
                  type: array
                  items:
                    type: integer
                  description: 藥品劑量
                  example: [1,1]
                unit[]:
                  type: array
                  items:
                    type: string
                  description: 藥品單位
                  example: ['tablet','tablet']
                customCaution[]:
                  type: array
                  items:
                    type: string
                  description: 自訂警告
                  example: ['', '服用時禁止空腹']
                cautions[]:
                  type: array
                  items:
                    type: string
                  description: 警告 id
                  example: ['31,33', '27']
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    $ref: "#/components/schemas/orderResponse"

  # ====================
  #
  # drugs
  #
  /drugs/{drugId}/uploadImages:
    post:
      summary: 上傳藥品圖片
      tags:
        - drug
      parameters:
        - name: drugId
          in: path
          description: 藥品id
          required: true
          example: 6595
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                images:
                  type: string
                  format: binary
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        alternativeText:
                          type: string
                        caption:
                          type: string
                        width:
                          type: number
                        height:
                          type: number
                        formats:
                          type: object
                          properties:
                            large:
                              type: object
                              properties:
                                ext:
                                  type: string
                                url:
                                  type: string
                                hash:
                                  type: string
                                mime:
                                  type: string
                                name:
                                  type: string
                                path:
                                  type: string
                                size:
                                  type: number
                                width:
                                  type: number
                                height:
                                  type: number
                            small:
                              type: object
                              properties:
                                ext:
                                  type: string
                                url:
                                  type: string
                                hash:
                                  type: string
                                mime:
                                  type: string
                                name:
                                  type: string
                                path:
                                  type: string
                                size:
                                  type: number
                                width:
                                  type: number
                                height:
                                  type: number
                            medium:
                              type: object
                              properties:
                                ext:
                                  type: string
                                url:
                                  type: string
                                hash:
                                  type: string
                                mime:
                                  type: string
                                name:
                                  type: string
                                path:
                                  type: string
                                size:
                                  type: number
                                width:
                                  type: number
                                height:
                                  type: number
                            thumbnail:
                              type: object
                              properties:
                                ext:
                                  type: string
                                url:
                                  type: string
                                hash:
                                  type: string
                                mime:
                                  type: string
                                name:
                                  type: string
                                path:
                                  type: string
                                size:
                                  type: number
                                width:
                                  type: number
                                height:
                                  type: number
                        hash:
                          type: string
                        ext:
                          type: string
                        mime:
                          type: string
                        size:
                          type: number
                        url:
                          type: string
                        previewUrl:
                          type: string
                        provider:
                          type: string
                        provider_metadata:
                          type: string
                        createdAt:
                          type: string
                        updatedAt:
                          type: string

  # ====================
  #
  # drugUpdates
  #
  /drugUpdates/applyRevise/{permitNo}:
    post:
      security:
        - client_token: []
      summary: 申請藥品異動
      tags:
        - drug
      parameters:
        - name: permitNo
          in: path
          description: 藥品唯一代碼
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/drugUpdateApplyRevise'
          application/x-www-form-urlencoded:
            encoding :
              sku :
                style : form
                explode : true
              packageName:
                style : form
                explode : true
              dosageForm :
                style : form
                explode : true
              usage :
                style : form
                explode : true
              dosage :
                style : form
                explode : true
              unit :
                style : form
                explode : true
              images:
                style : form
                explode : true
            schema:
              $ref: '#/components/schemas/drugUpdateApplyRevise'

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    $ref: '#/components/schemas/drugUpdateResponse'

  /drugUpdates/response/{uuid}:
    post:
      summary: 藥品異動審核
      security:
        - client_token: []
      tags:
        - drug
      parameters:
        - name: uuid
          in: path
          description: 申請異動唯一識別碼
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum:
                    - approval
                    - cancel
                  description: approval(核准)、cancel(取消)
                  example: 'approval'
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum:
                    - approval
                    - cancel
                  description: approval(核准)、cancel(取消)
                  example: 'cancel'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                     $ref: '#/components/schemas/drugUpdateResponse'

  /drugUpdates/revise/{permitNo}:
    post:
      security:
        - client_token: []
      summary: 藥品異動
      tags:
        - drug
      parameters:
        - name: permitNo
          in: path
          description: 藥品唯一代碼
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/drugUpdateRevise'
          application/x-www-form-urlencoded:
            encoding :
              sku :
                style : form
                explode : true
              packageName:
                style : form
                explode : true
              dosageForm :
                style : form
                explode : true
              usage :
                style : form
                explode : true
              dosage :
                style : form
                explode : true
              unit :
                style : form
                explode : true
              images:
                style : form
                explode : true
            schema:
              $ref: '#/components/schemas/drugUpdateRevise'

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    $ref: '#/components/schemas/drugUpdateResponse'


  # ====================
  #
  # other
  #

  /upload:
    post:
      summary: 上傳檔案
      tags:
        - other
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  type: string
                  format: binary
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: number
                    name:
                      type: string
                    alternativeText:
                      type: string
                      nullable: true
                    caption:
                      type: string
                      nullable: true
                    width:
                      type: number
                    height:
                      type: number
                    formats:
                      type: object
                      properties:
                        large:
                          type: object
                          properties:
                            ext:
                              type: string
                            url:
                              type: string
                            hash:
                              type: string
                            mime:
                              type: string
                            name:
                              type: string
                            path:
                              type: string
                              nullable: true
                            size:
                              type: number
                            width:
                              type: number
                            height:
                              type: number
                        small:
                          type: object
                          properties:
                            ext:
                              type: string
                            url:
                              type: string
                            hash:
                              type: string
                            mime:
                              type: string
                            name:
                              type: string
                            path:
                              type: string
                              nullable: true
                            size:
                              type: number
                            width:
                              type: number
                            height:
                              type: number
                        medium:
                          type: object
                          properties:
                            ext:
                              type: string
                            url:
                              type: string
                            hash:
                              type: string
                            mime:
                              type: string
                            name:
                              type: string
                            path:
                              type: string
                              nullable: true
                            size:
                              type: number
                            width:
                              type: number
                            height:
                              type: number
                        thumbnail:
                          type: object
                          properties:
                            ext:
                              type: string
                            url:
                              type: string
                            hash:
                              type: string
                            mime:
                              type: string
                            name:
                              type: string
                            path:
                              type: string
                              nullable: true
                            size:
                              type: number
                            width:
                              type: number
                            height:
                              type: number
                    hash:
                      type: string
                    ext:
                      type: string
                    mime:
                      type: string
                    size:
                      type: number
                    url:
                      type: string
                    previewUrl:
                      type: string
                      nullable: true
                    provider:
                      type: string
                    provider_metadata:
                      type: string
                      nullable: true
                    createdAt:
                      type: string
                    updatedAt:
                      type: string
