openapi: 3.0.1

info:
  title: 醫藥淘
  version: 1.0.0

servers:
  - url: http://localhost:1339/api/
  - url: https://api-dev.e-drugsearch.com.hk/api/

components:
  securitySchemes:
    user_token:
      in: header
      type: apiKey
      name: Authorization
      description: 藥房使用者 驗證需要的 token, Bearer xxx
    member_token:
      in: header
      type: apiKey
      name: Authorization
      description: member 驗證需要的 token, Bearer xxx
  parameters:
    page:
      in: query
      name: pagination[page]
      schema:
        type: number
      required: true
      example: 1
    prepage:
      in: query
      name: pagination[pageSize]
      schema:
        type: number
      required: true
      example: 100
    language:
      in: header
      name: accept-language
      schema:
        type: string
      required: false
      example: 'en'
    locale:
      in: query
      name: locale
      schema:
        type: string
        enum: ['zh', 'en', 'zh-CN']
      description: 多語系輸出 繁體中文，英文，簡體中文
      required: false
      example: 'zh'
    isCollect:
      in: query
      name: isCollect
      schema:
        type: integer
        enum: [0,1]
      required: false
      description: 是否已收藏，isCollect=1 ，已收藏
      example: 0
  schemas:
    DrugOptionsResponse:
      type: object
      properties:
        msg :
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              key:
                type: string
                description: 用來執行搜尋用的參數
              value:
                type: string
                description: 顯示名稱

paths:

  # ====================
  #
  # Member
  #

  /members/register:
    post:
      summary: 會員註冊 EYT 帳號
      tags:
        - member
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: test
                email:
                  type: string
                  example: test@123.com
                mobile:
                  type: string
                  example: 0912345678
                password:
                  type: string
                  example: 123
                confirmPassword:
                  type: string
                  example: 123
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
  /members/login:
    post:
      summary: 會員登入 EYT email 註冊的帳號
      tags:
        - member
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: test@123.com
                password:
                  type: string
                  example: 123
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      jwt:
                        type: string
                      member:
                        type: object
                        properties:
                          id:
                            type: number
                          uuid:
                            type: string
                          name:
                            type: string
                          email:
                            type: string


  # ====================
  #
  # posts
  #

  /all/posts:
    get:
      summary: 獲取文章列表
      tags:
        - posts
      parameters:
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言  
        - in: query
          name: keyword
          schema:
            type: string
          description: 關鍵字搜尋(title, content, tags, store, type)-模糊搜尋
        - in: query
          name: category
          schema:
            type: string
          description: 分類篩選
        - in: query
          name: startTime
          schema:
            type: string
            minimum: 1
          description: 篩選功能(文章發佈時間)   
        - in: query
          name: endTime
          schema:
            type: string
          description: 篩選功能(文章發佈時間)   
        - in: query
          name: storeName
          schema:
            type: string
            minimum: 1
          description: 篩選功能-來源名稱（精準搜尋）     
        - in: query
          name: sortCondition
          schema:
            type: string
            enum: [nameAsc, nameDesc,timeAsc,timeDesc, collectDesc, priorityDesc]
          description: 排序功能
        - in: query
          name: pageSize
          schema:
            type: integer
          description: 單頁筆數
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
          description: 第幾頁                                       
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                          description: 文章標題
                        content:
                          type: string
                          description: 文章內容
                        type:
                          type: string
                          description: 文章類別（大標）
                        viewCount:
                          type: number
                          description: 文章瀏覽數
                        store:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 文章來源
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              tagName:
                                type: string
                                description: 標籤名稱
                        publishedAt:
                          type: string
                        memberCount:
                          type: number
                          description: 收藏數
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                        description: 當前頁面
                      pageSize:
                        type: number
                        description: 每頁筆數
                      pageCount:
                        type: number
                        description: 總共頁數
                      total:
                        type: number
                        description: 總共筆數

    post:
      summary: 建立文章
      tags:
        - posts
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: 文章標題
                content:
                  type: string
                  description: 文章內容
                store:
                  type: number
                  description: 該文章是屬於哪一個供應商，當前因無後台機制故先寫死
                  example: 1
                type:
                  type: string
                  example: 藥物新知
                  description: 文章類別
                locale:
                  type: string
                  enum: ['zh', 'en', 'zh-CN']
                  description: 文章語言，上面分別對應 繁體中文，英文，簡體中文
                image:
                  type: string
                  example: binary
                  description: 文章圖片 
                sort:
                  type: number        
                  description: 排序順序
                  example: 999     
                publishStart:
                  type: string
                  description: 預計上架時間（實際功能會到 phaseII 實作）
                publishEnd:
                  type: number
                  description: 預計下架時間（實際功能會到 phaseII 實作）

              required:
                - title
                - store
                - type
                - locale
                - image

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      title:
                        type: string
                        description: 文章標題
                      content:
                        type: string
                        description: 文章內容
                      store:
                        type: string
                        description: 發布來源
                      type:
                        type: string
                        description: 文章類別（大標）
                      sort:
                        type: number
                        description: 文章排序的值
                      viewCount:
                        type: number
                        description: 文章瀏覽數
                      isApproved:
                        type: boolean
                        description: 文章是否已核准（核轉狀態下才會出現在前台）
                      isDeleted:
                        type: boolean
                      publishStart:
                        type: string
                      publishEnd:
                        type: string
                      locale:
                        type: string
                        description: 文章語系
                      image:
                        type: string
                        description: 文章圖片

        '500':
          description: 伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      msg:
                        type: string
                        example:  伺服器錯誤
        '400':
          description: 失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      msg:
                        type: string
                        example:  建立失敗                              

  /all/posts/{id}:
    get:
      summary: 獲取指定文章
      tags:
        - posts
      parameters:
        - name: id
          in: path
          description: 文章id
          required: true
          example: 3
          schema:
            type: string
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  post:
                    type: object
                    properties:
                      title:
                        type: string
                        description: 文章標題
                      content:
                        type: string
                        description: 文章內容
                      store:
                        type: object
                        properties:
                          id:
                            type: number
                          name:
                            type: string
                            description: 文章來源
                      type:
                        type: string
                        description: 文章type
                      viewCount:
                        type: number
                        description: 文章瀏覽數
                      image:
                        type: string
                      tags:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: number
                            tagName:
                              type: string
                              description: hashTag 名稱
                      publishedAt:
                        type: string
                      memberCount:
                        type: number
                        description: 文章收藏數

  /all/posts/{id}/extends:  
    get:
      summary: 獲取延伸閱讀文章 三篇
      tags:
        - posts
      parameters:
        - name: id
          in: path
          description: 文章id
          required: true
          example: 3
          schema:
            type: string 
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言  
        - in: query
          name: limit
          schema:
            type: number
          description: 回傳的數量                             
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                        content:
                          type: string
                        type:
                          type: string
                        viewCount:
                          type: number
                        image:
                          type: string
                        store:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              tagName:
                                type: string
                        publishedAt:
                          type: string
                        memberCount:
                          type: number                      


    # review
    put:
      summary: 更新指定文章
      tags:
        - posts
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: post id
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: 文章標題
                content:
                  type: string
                  description: 文章內容
                store:
                  type: number
                  description: 該文章是屬於哪一個供應商，當前因無後台機制故先寫死
                  example: 1
                type:
                  type: string
                  example: 藥物新知
                  description: 文章類別
                locale:
                  type: string
                  enum: ['zh', 'en', 'zh-CN']
                  description: 文章語言，上面分別對應 繁體中文，英文，簡體中文
                image:
                  type: string
                  example: binary
                  description: 文章圖片 
                sort:
                  type: number        
                  description: 排序順序
                  example: 999     
                publishStart:
                  type: string
                  description: 預計上架時間（實際功能會到 phaseII 實作）
                publishEnd:
                  type: number
                  description: 預計下架時間（實際功能會到 phaseII 實作）

              required:
                - title
                - store
                - type
                - locale
                - image

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      title:
                        type: string
                        description: 文章標題
                      content:
                        type: string
                        description: 文章內容
                      store:
                        type: string
                        description: 文章來源
                      type:
                        type: string
                        description: 文章類別（大標）
                      sort:
                        type: number
                        description: 文章排序值
                      viewCount:
                        type: number
                        description: 文章瀏覽數
                      isApproved:
                        type: boolean
                      isDeleted:
                        type: boolean
                      publishStart:
                        type: string
                      publishEnd:
                        type: string
                      createdAt:
                        type: string
                      updatedAt:
                        type: string
                      locale:
                        type: string
                        description: 文章語系
                      image:
                        type: string
                        description: 文章圖片
                      tags:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: number
                            tagName:
                              type: string  

        '500':
          description: 伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      msg:
                        type: string
                        example:  伺服器錯誤
        '400':
          description: 失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      msg:
                        type: string
                        example:  建立失敗         

  /new/posts:  
    get:
      summary: 獲取最新文章
      tags:
        - posts
      parameters:
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言  
        - in: query
          name: limit
          schema:
            type: number
          description: 回傳的數量           
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                          description: 文章標題
                        content:
                          type: string
                          description: 文章內容
                        type:
                          type: string
                          description: 文章類別（大標）
                        viewCount:
                          type: number
                          description: 文章瀏覽數
                        image:
                          type: string
                        store:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 文章來源
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              tagName:
                                type: string
                        publishedAt:
                          type: string
                        memberCount:
                          type: number
                          description: 文章收藏數

  /type/posts:  
    get:
      summary: 依照type撈取三篇最新的文章
      tags:
        - posts
      parameters:
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言  
        - in: query
          name: limit
          schema:
            type: number
          description: 回傳的數量                 
        - in: query
          name: type
          schema:
            type: string
          description: type的名稱        
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                          description: 文章標題
                        content:
                          type: string
                          description: 文章內容
                        type:
                          type: string
                          description: 文章類別（大標）
                        viewCount:
                          type: number
                          description: 文章瀏覽數
                        image:
                          type: string
                        store:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 文章來源
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              tagName:
                                type: string
                        publishedAt:
                          type: string
                        memberCount:
                          type: number
                          description: 文章收藏數

  /posts/tag/{tagId}:  
    get:
      summary: 搜尋具有特定tag的文章
      tags:
        - posts
      parameters:
        - in: path
          name: tagId
          required: true
          schema:
            type: string
          description: tag id  
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言            
        - in: query
          name: pageSize
          schema:
            type: integer
          description: 單頁筆數
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
          description: 第幾頁  
        - in: query
          name: sortCondition
          schema:
            type: string
            enum: [nameAsc, nameDesc,timeAsc,timeDesc, collectDesc, priorityDesc]
          description: 排序功能                             
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                          description: 文章標題
                        content:
                          type: string
                          description: 文章內容
                        type:
                          type: string
                          description: 文章類別（大標）
                        viewCount:
                          type: number
                          description: 文章瀏覽數
                        store:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 文章來源
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              tagName:
                                type: string
                                description: 標籤名稱
                        publishedAt:
                          type: string
                        memberCount:
                          type: number
                          description: 收藏數
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                        description: 當前頁面
                      pageSize:
                        type: number
                        description: 每頁筆數
                      pageCount:
                        type: number
                        description: 總共頁數
                      total:
                        type: number
                        description: 總共筆數

  /posts/store/{storeId}:  
    get:
      summary: 根據store搜尋文章
      tags:
        - posts
      parameters:
        - in: path
          name: storeId
          required: true
          schema:
            type: string
          description: store id  
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言            
        - in: query
          name: pageSize
          schema:
            type: integer
          description: 單頁筆數
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
          description: 第幾頁
        - in: query
          name: sortCondition
          schema:
            type: string
            enum: [nameAsc, nameDesc,timeAsc,timeDesc, collectDesc, priorityDesc]
          description: 排序功能                               
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        title:
                          type: string
                          description: 文章標題
                        content:
                          type: string
                          description: 文章內容
                        type:
                          type: string
                          description: 文章類別（大標）
                        viewCount:
                          type: number
                          description: 文章瀏覽數
                        store:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 文章來源
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              tagName:
                                type: string
                                description: 標籤名稱
                        publishedAt:
                          type: string
                        memberCount:
                          type: number
                          description: 收藏數
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                        description: 當前頁面
                      pageSize:
                        type: number
                        description: 每頁筆數
                      pageCount:
                        type: number
                        description: 總共頁數
                      total:
                        type: number
                        description: 總共筆數

  /collect/posts/{id}:  
    post:
      summary: 收藏文章
      tags:
        - posts
      security:
        - member_token: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: post id                    

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: 收藏文章成功
        '400':
          description: 失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: 收藏文章失敗            

  /cancel/posts/{id}:  
    put:
      summary: 取消收藏文章
      tags:
        - posts
      security:
        - member_token: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: post id                    

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: 取消收藏！

  /posts/{id}/categories:  
    get:
      summary: 獲取文章的分類麵包屑
      tags:
        - posts
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: number
                    name:
                      type: string


  # ====================
  #
  # stores
  #

  /stores/list:
    get:
      summary: 獲取商店的id及name
      tags:
        - stores
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string

  # ====================
  #
  # tags
  #

  /all/tags:
    get:
      summary: 獲取tags
      tags:
        - tags
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        parent:
                          description: 如果有上一層的標籤，則會給上一層標籤的id，不然會給空字串
                          oneOf:
                            - type: string
                            - type: number


    post:
      summary: 建立tag
      tags:
        - tags
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                parent:
                  type: number
                  description: 標籤的父層
                tagName:
                  type: string
                  description: 標籤名稱
                type:
                  type: string
                  description: 該標籤是屬於分類還是一般標籤，default為 hashTag，分類則帶值categories
                  example: categories
                locale:
                  type: string
                  enum: ['zh', 'en', 'zh-CN']
                  description: 文章語言，上面分別對應 繁體中文，英文，簡體中文

              required:
                - tagName
                - locale

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      tagName:
                        type: string
                      parent:
                        type: object
                        properties:
                          id:
                            type: number
                            description: 父層tag的名稱（只會有一個父層）
                          tagName:
                            type: string
                            description: 父層tag的名稱（只會有一個父層）
                      children:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: number
                              description: 子層tag的名稱
                            tagName:
                              type: string
                              description: 子層tag的名稱

        '500':
          description: 伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      msg:
                        type: string
                        example:  伺服器錯誤
        '400':
          description: 失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      msg:
                        type: string
                        example:  建立失敗              

  /all/tags/{id}:
    get:
      summary: 獲取tag
      tags:
        - tags
      parameters:
        - name: id
          in: path
          description: tag id
          required: true
          example: 3
          schema:
            type: string
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      tagName:
                        type: string
                      type:
                        type: string
                      parent:
                        type: object
                        properties:
                          id:
                            type: number
                          tagName:
                            type: string
                      children:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: number
                            tagName:
                              type: string


    put:
      summary: 修改tag
      tags:
        - tags
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                parent:
                  type: number
                  description: 標籤的父層
                tagName:
                  type: string
                  description: 標籤名稱
                type:
                  type: number
                  description: 該標籤是屬於分類還是一般標籤，default為 hashTag，分類則帶值categories
                  example: hashTag
                locale:
                  type: string
                  enum: ['zh', 'en', 'zh-CN']
                  description: 文章語言，上面分別對應 繁體中文，英文，簡體中文

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      tagName:
                        type: string
                      type:
                        type: string
                      parent:
                        type: object
                        properties:
                          id:
                            type: number
                          tagName:
                            type: string
                      children:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: number
                            tagName:
                              type: string

  # ====================
  #
  # categories
  #                              

  /categories/posts:
    get:
      summary: 獲取文章的categories
      tags:
        - categories
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string   
                        parent_id:
                          description: 如果有上一層的標籤，則會給上一層標籤的id，不然會給空字串
                          oneOf:
                            - type: string
                            - type: number
  # ====================
  #
  # subscribes
  #

  /subscribe/list:
    get:
      summary: 獲取訂閱的選項
      tags:
        - subscribe
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  stores:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                  categories:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string

  /general/subscribe:
    post:
      summary: 非會員訂閱
      tags:
        - subscribe
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                email:
                  type: number
                  description: 標籤的父層
                store:
                  type: string
                  description: 追蹤的來源
                  example: 1,2,3
                category:
                  type: string
                  description: 追蹤的分類
                  example: 2,4,7

              required:
                - email
 
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string


  /subscribe/cancel/{uuid}:
    post:
      summary: 取消訂閱（不論會員非會員）
      tags:
        - subscribe
      parameters:
        - name: uuid
          in: path
          description: 訂閱的uuid
          required: true
          example: f6bd3fe9-62ae-4f68-9a78-5779880571812
          schema:
            type: string   
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string


  # ====================
  #
  # drug
  #
  /drugs/options/holders:
    get:
      summary: 持有人
      description: "取得持有人"
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 3M HONG KONG LTD
                    - key: 2
                      name: A P TECHNOTRADE CO

  /drugs/options/ingredients:
    get:
      summary: 藥品成分
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: sulfadiazine silver
                    - key: 2
                      name: cetrimide

  /drugs/options/tags:
    get:
      summary: 藥品分類
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 中樞神經系統藥物
                    - key: 2
                      name: 傷風感冒藥

  /drugs/options/saleRequirements:
    get:
      summary: 銷售要求
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: Over The Counter/For Animal Feeds
                    - key: 2
                      name: Over-The-Counter Medicines

  /drugs/options/brands:
    get:
      summary: 品牌
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 普拿疼
                    - key: 2
                      name: 伏冒

  /drugs/options/legalClassification:
    get:
      summary: 藥品管制分類
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: Antibiotic
                    - key: 2
                      name: Exempted Antibiotic
                    - key: 3
                      name: Not A Poison

  /drugs/options/names:
    get:
      summary: 藥品名稱
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 0.015% CHLORHEXIDINE & 0.15% CETRIMIDE SOL
                      name: 0.015% CHLORHEXIDINE & 0.15% CETRIMIDE SOL
                      permitNo: HK-42682
                    - key: 0.05% CHLORHEXIDINE & 0.5% CETRIMIDE SOL
                      name: 0.05% CHLORHEXIDINE & 0.5% CETRIMIDE SOL
                      permitNo: HK-42684

  /search/drugs:
    get:
      summary: 藥品搜尋
      tags:
        - drug
      parameters:
        - $ref: '#/components/parameters/isCollect'
        - in: query
          name: ingredient
          schema:
            type: integer
          description: 藥品成分 id
        - in: query
          name: holder
          schema:
            type: integer
          description: 證書持有人id
        - in: query
          name: tags
          schema:
            type: string
          description: 藥品分類
        - in: query
          name: saleRequirement
          schema:
            type: string
          description: 銷售要求
        - in: query
          name: legalClassification
          schema:
            type: integer
          description: 藥品管制分類
        - in: query
          name: brand
          schema:
            type: integer
          description: 品牌
        - in: query
          name: name
          schema:
            type: string
          description: 藥品名稱
        - in: query
          name: prefixName
          schema:
            type: string
          description: 藥品字首
        - in: query
          name: permitNo
          schema:
            type: string
          description: permit No
        - in: query
          name: keyword
          schema:
            type: string
          description: 藥品名稱(中英), 名稱, 核准碼, 主成份, SKU
        - in: query
          name: sort
          schema:
            type: string
            enum: [nameAsc, nameDesc,collectDesc]
          description: 排序功能
        - in: query
          name: perPage
          schema:
            type: integer
          description: 每頁筆數
        - in: query
          name: page
          schema:
            type: integer
          description: 頁碼
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg :
                      type: string
                    data:
                      type: array
                      items:
                        type: object
                        properties:
                          isCollect:
                            type: boolean
                            description: 是否收藏
                          permitNo:
                            type: string
                            description: 用來執行搜尋用的參數
                          name:
                            type: string
                            description: 顯示名稱
                          nameZh:
                            type: string
                            description: 顯示名稱(中文)
                          url:
                            type: string
                            description: 藥品圖示
                          ingredients:
                            type: array
                            description: 顯示名稱
                    pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            description: 起始頁數
                          pageSize:
                            type: integer
                            description: 每頁資料筆數
                          pageCount:
                            type: integer
                            description: 總頁數
                          total:
                            type: integer
                            description: 總筆數
                example:
                  msg : Success
                  pagination :
                    page: 1
                    pageSize: 50
                    pageCount: 1
                    total: 1
                  data:
                    - isCollect: false
                      permitNo: HK-21197
                      name: MARSEDYL ELIXIR
                      nameZh: 萬咳療
                      url: https://dcq8lblln1b30.cloudfront.net/assets/images/1673839860.png
                      ingredients:
                        - codeine phosphate
                        - ephedrine hydrochloride
                        - promethazine hydrochloride

  /drugs/detail/{permitNo}:
    get:
      summary: 藥品明細
      tags:
        - drug
      parameters:
        - name: permitNo
          in: path
          description: 藥品核准碼
          required: true
          example: HK-42682
          schema:
            type: string
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg:
                      type: string
                    data:
                      type: object
                      properties:
                        isCollect:
                          type: boolean
                        permitNo:
                          type: string
                        precaution:
                          type: string
                        indication:
                          type: string
                        holder:
                          type: object
                          properties:
                            name:
                              type: string
                            address:
                              type: string
                        name:
                          type: string
                        nameZh:
                          type: string
                        aka:
                          type: string
                        dosageForm:
                          type: string
                        usage:
                          type: string
                        sideEffect:
                          type: string
                        legalClassification:
                          type: string
                        saleRequirement:
                          type: string
                        registrationDate:
                          type: string
                        ingredients:
                          type: array
                          items:
                            type: string
                        tags:
                          type: array
                          items:
                            type: string
                        brand:
                          type: string
                        urls:
                          type: array
                          items:
                            type: string
                        packages:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              dosage:
                                type: number
                              usage:
                                type: string
                              unit:
                                type: string
                              sku:
                                type: string
                              createdAt:
                                type: string
                              updatedAt:
                                type: string
                              name:
                                type: string
                              dosageForm:
                                type: string
                              urls:
                                type: array
                                items:
                                  type: string
                example:
                  msg : Success
                  data:
                    - isCollect: false
                      permitNo: HK-65977
                      name: MAX COLTALIN COUGH HOT REMEDY POWDER FOR ORAL SOLUTION
                      nameZh: 幸福傷風咳-熱飲5包
                      aka: 幸福傷風咳
                      dosageForm: powder
                      usage: oral
                      precaution: 測試資料
                      indication:
                      legalClassification: Not A Poison
                      saleRequirement: Over-The-Counter Medicines
                      registrationDate: 2018-11-14
                      url: https://dcq8lblln1b30.cloudfront.net/assets/images/1673839860.png
                      tags:
                        - 西藥
                        - 感冒藥
                      ingredients:
                        - guaifenesin
                        - paracetamol
                        - phenylephrine hydrochloride
                      urls:
                        - https://s3.ap-southeast-1.amazonaws.com/medicine-s3.cloudsatlas.com.hk/017b5138_8b8c_4e50_947a_11b2e09f1e34_a1b70956e7.png
                        - https://s3.ap-southeast-1.amazonaws.com/medicine-s3.cloudsatlas.com.hk/42e68e79_ee43_4f11_bd64_4108527a0712_d018c4fc13.png
                        - https://s3.ap-southeast-1.amazonaws.com/medicine-s3.cloudsatlas.com.hk/f0db146f_7cea_4ae0_abab_000c3e70ddfb_1087e50d9e.png
                      packages:
                        sku: 3514671130562
                        name: 幸福傷風咳-熱飲5包
                        dosage: 1
                        unit: sachet
                        urls:
                          - https://s3.ap-southeast-1.amazonaws.com/medicine-s3.cloudsatlas.com.hk/f0db146f_7cea_4ae0_abab_000c3e70ddfb_a1c38f0e0f.png
                      holder:
                        name: FP HEALTHCARE LIMITED
                        address: FLAT/RM A, 3/F, SUN KING FACTORY BUILDING, 1-7, SHING CHUEN ROAD, TAI WAI, SHATIN, NEW TERRITORIES


  # ====================
  #
  # stores 藥房搜尋
  #
  /stores/options/stockTypes:
    get:
      summary: 庫存類型
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/locale'
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: lv1
                      value: 即時庫存
                    - key: lv2
                      value: 非即時庫存
                    - key: lv3
                      value: 無庫存資料

  /stores/options/mainServices:
    get:
      summary: 主要服務類型
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/locale'
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 處方藥配藥
                    - key: 2
                      name: 藥品諮詢
                    - key: 3
                      name: 零售藥品與健康食品

  /stores/options/services:
    get:
      summary: 服務類型
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/locale'
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 處方藥配藥服務
                    - key: 2
                      name: 非處方藥和保健品的銷售
                    - key: 3
                      name: 中醫藥建議和配方

  /stores/options/tags:
    get:
      summary: 服務類型
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/locale'
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 24 小時營業
                    - key: 2
                      name: 線上藥師諮詢

  /stores/options/districts:
    get:
      summary: 取的香港行政區域
      tags:
        - stores
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg :
                      type: string
                    data:
                      type: array
                      items:
                        type: object
                        properties:
                          key:
                            type: string
                            description: 行政區域代碼
                          value:
                            type: string
                            description: 行政區域 名稱
                          areaKey:
                            type: string
                            description: 區域代碼
                          area:
                            type: string
                            description: 區域名稱
                example:
                  msg : Success
                  data:
                    - key: EASTERN
                      value: 東區
                      areaKey: HONG_KONG_ISLAND
                      area: 香港島
                    - key: WAN_CHAI
                      value: 灣仔區
                      areaKey: HONG_KONG_ISLAND
                      area: 香港島
                    - key: SAI_KUNG
                      value: 西貢區
                      areaKey: NEW_TERRITORIES
                      area: 新界

  /search/stores:
    get:
      summary: 藥房
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/isCollect'
        - in: query
          name: isGenuine
          schema:
            type: string
          description: 正版正貨 0,1
        - in: query
          name: isExcellent
          schema:
            type: string
          description: 信心保證 0,1
        - in: query
          name: tags
          schema:
            type: string
          description: tags 篩選
        - in: query
          name: mainServices
          schema:
            type: string
          description: 主要服務篩選
        - in: query
          name: services
          schema:
            type: integer
          description: 服務篩選
        - in: query
          name: stockType
          schema:
            type: string
          description: 庫存類型 lv1,lv2,lv3
        - in: query
          name: area
          schema:
            type: string
          description: 指定搜尋區域
        - in: query
          name: district
          explode: true
          schema:
            type: string
          description: 指定行政區
        - in: query
          name: keyword
          schema:
            type: string
          description: 藥房名稱(中英), 電話, 區域, 分區, 地址, 主要服務項目, 服務項目, tags
        - in: query
          name: sort
          schema:
            type: string
            enum: [nameAsc, nameDesc,collectDesc]
          description: 排序功能
        - in: query
          name: perPage
          schema:
            type: integer
          description: 每頁筆數
        - in: query
          name: page
          schema:
            type: integer
          description: 頁碼
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg:
                      type: string
                    data:
                          type: array
                          items:
                            type: object
                            properties:
                              uuid:
                                type: string
                              stockType:
                                type: string
                              nameEn:
                                type: string
                              name:
                                type: string
                              address:
                                type: string
                              lat:
                                type: number
                              lng:
                                type: number
                              contactNumber:
                                type: string
                              businessHours:
                                type: string
                              isExcellent:
                                type: boolean
                              isGenuine:
                                type: boolean
                              website:
                                type: string
                              plan:
                                type: object
                                properties:
                                  wechat:
                                    type: boolean
                                  website:
                                    type: boolean
                                  facebook:
                                    type: boolean
                                  whatsapp:
                                    type: boolean
                                  instagram:
                                    type: boolean
                                  navigation:
                                    type: boolean
                                  contactNumber:
                                    type: boolean
                              districtKey:
                                type: string
                              areaKey:
                                type: string
                              district:
                                type: string
                              area:
                                type: string
                              collectCount:
                                type: number
                              isCollect:
                                type: boolean
                              tags:
                                type: array
                                items:
                                  type: string
                              tagKey:
                                type: array
                                items:
                                  type: number
                              mainServices:
                                type: array
                                items:
                                  type: string
                              mainServiceKey:
                                type: array
                                items:
                                  type: number
                              mainServiceIcon:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    key:
                                      type: number
                                    name:
                                      type: string
                                    icon:
                                      type: string
                              imgUrl:
                                type: string
                example:
                  msg : Success
                  data:
                    - uuid: bb9ae68e-e856-41cf-85f6-72f7c7a3716e
                      stockType: lv3
                      nameEn: Nextgen
                      name: Nextgen
                      districtKey: EASTERN
                      areaKey: HONG_KONG_ISLAND
                      district: 東區
                      area: 香港島
                      address: Anhe Road, Daan District
                      lat: 25.0260285
                      lng: 121.5493852
                      contactNumber: 2323232
                      businessHours: 09:00 ~ 18:00
                      website: https://erp-dev.cloudsatlas.com.hk
                      plan:
                        wechat: false
                        facebook: false
                        whatsapp: false
                        instagram: false
                        navigation: false
                        website: false
                      isExcellent: false
                      isGenuine: true
                      collectCount: 0
                      isCollect: false
                      imgUrl: https://dcq8lblln1b30.cloudfront.net/assets/images/1673839860.png
                      tags:
                        - 24小時營業
                        - 線上藥師諮詢
                        - 連鎖藥房
                      tagKey:
                        - 254
                        - 255
                        - 256
                      mainServices:
                        - 處方藥配藥
                        - 藥品諮詢
                        - 零售藥品與健康食品
                      mainServicesKey:
                        - 254
                        - 255
                        - 256
                      mainServiceIcon:
                        - key : 254
                          name: 處方藥配藥
                          icon: bchat-question-outline
                        - key : 255
                          name: 藥品諮詢
                          icon: bchat-question-outline
                        - key : 256
                          name: 零售藥品與健康食品
                          icon: bchat-question-outline

  /stores/detail/{uuid}:
    get:
      summary: 藥房
      tags:
        - stores
      parameters:
        - name: uuid
          in: path
          description: 藥房唯一代碼
          required: true
          example: bb9ae68e-e856-41cf-85f6-72f7c7a3716e
          schema:
            type: string
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg:
                      type: string
                    data:
                      type: object
                      properties:
                        uuid:
                          type: string
                        stockType:
                          type: string
                        nameEn:
                          type: string
                        name:
                          type: string
                        address:
                          type: string
                        lat:
                          type: number
                        lng:
                          type: number
                        contactNumber:
                          type: string
                        businessHours:
                          type: string
                        isExcellent:
                          type: boolean
                        isGenuine:
                          type: boolean
                        website:
                          type: string
                        plan:
                          type: object
                          properties:
                            wechat:
                              type: boolean
                            website:
                              type: boolean
                            facebook:
                              type: boolean
                            whatsapp:
                              type: boolean
                            instagram:
                              type: boolean
                            navigation:
                              type: boolean
                            contactNumber:
                              type: boolean
                        district:
                          type: string
                        area:
                          type: string
                        collectCount:
                          type: number
                        isCollect:
                          type: boolean
                        imgUrl:
                          type: string
                        tags:
                          type: array
                          items:
                            type: string
                        tagKey:
                          type: array
                          items:
                            type: number
                        mainServiceIcon:
                          type: array
                          items:
                            type: object
                            properties:
                              key:
                                type: number
                              name:
                                type: string
                              icon:
                                type: string
                        mainServices:
                          type: array
                          items:
                            type: string
                        mainServiceKey:
                          type: array
                          items:
                            type: number
                        services:
                          type: array
                          items:
                            type: string
                        serviceKey:
                          type: array
                          items:
                            type: number
                    pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            description: 起始頁數
                          pageSize:
                            type: integer
                            description: 每頁資料筆數
                          pageCount:
                            type: integer
                            description: 總頁數
                          total:
                            type: integer
                            description: 總筆數
                example:
                  msg : Success
                  pagination :
                    page: 1
                    pageSize: 50
                    pageCount: 1
                    total: 1
                  data:
                    uuid: bb9ae68e-e856-41cf-85f6-72f7c7a3716e
                    stockType: lv3
                    nameEn: Nextgen
                    name: Nextgen
                    district: 東區
                    area: 香港島
                    address: Anhe Road, Daan District
                    lat: 25.0260285
                    lng: 121.5493852
                    contactNumber: 2323232
                    businessHours: 09:00 ~ 18:00
                    website: https://erp-dev.cloudsatlas.com.hk
                    plan:
                      wechat: false
                      facebook: false
                      whatsapp: false
                      instagram: false
                      navigation: false
                      website: false
                    isExcellent: false
                    isGenuine: true
                    collectCount: 0
                    isCollect: false
                    imgUrls:
                      - https://dcq8lblln1b30.cloudfront.net/assets/images/1673839860.png
                    tags:
                      - 24小時營業
                      - 線上藥師諮詢
                      - 連鎖藥房
                    tagKey:
                      - 254
                      - 255
                      - 256
                    mainServices:
                      - 處方藥配藥
                      - 藥品諮詢
                      - 零售藥品與健康食品
                    mainServicesKey:
                      - 254
                      - 255
                      - 256
                    mainServiceIcon:
                      - key : 254
                        name: 處方藥配藥
                        icon: bchat-question-outline
                      - key : 255
                        name: 藥品諮詢
                        icon: bchat-question-outline
                      - key : 256
                        name: 零售藥品與健康食品
                        icon: bchat-question-outline
                    services:
                      - 處方藥配藥服務
                      - 藥品信息和用藥建議
                      - 藥物遵從性評估和提醒
                    serviceKey:
                        - 254
                        - 255
                        - 256

  /stores/medicines:
    get:
      summary: 哪裡買藥
      tags:
        - stores
      parameters:
        - in: query
          name: permitNo
          schema:
            type: array
            items:
              type: string
          description: 藥品
          example: ['HK-05357', 'HK-07007']
        - in: query
          name: isExact
          schema:
            type: integer
            enum: [0,1]
          description: 藥品使否要完整符合
        - in: query
          name: stockType
          schema:
            type: string
            enum: [lv1, lv2]
          description: 庫存類型
        - in: query
          name: district
          explode: true
          schema:
            type: array
            items:
              type: string
          description: 指定行政區
        - in: query
          name: area
          schema:
            type: string
          description: 指定搜尋區域
        - in: query
          name: lat
          schema:
            type: integer
          description: 緯度
        - in: query
          name: lng
          schema:
            type: integer
          description: 經度
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg:
                      type: string
                    coordinate:
                      type: object
                      properties:
                        lat:
                          type: number
                        lng:
                          type: number
                    data:
                      type: array
                      items:
                        type: object
                        properties:
                          uuid:
                            type: string
                          name:
                            type: string
                          address:
                            type: string
                          district:
                            type: string
                          lng:
                            type: number
                          lat:
                            type: number
                          distance:
                            type: number
                          contactNumber:
                            type: string
                          businessHours:
                            type: string
                          isExcellent:
                            type: boolean
                          isGenuine:
                            type: boolean
                          collectCount:
                            type: number
                          isCollect:
                            type: boolean
                          isExact:
                            type: boolean
                          stockType:
                            type: string
                          drugCount:
                            type: number
                          drugs:
                            type: array
                            items:
                              type: object
                              properties:
                                permitNo:
                                  type: string
                                name:
                                  type: string
                example:
                  msg : Success
                  coordinate:
                    lat: 22.3530251
                    lng: 113.9628303
                  data:
                    - uuid: bb9ae68e-e856-41cf-85f6-72f7c7a3716e
                      stockType: lv1
                      name: Nextgen
                      address: Anhe Road, Daan District
                      lat: 25.0260285
                      lng: 121.5493852
                      distance: 21
                      contactNumber: 2323232
                      businessHours: 09:00 ~ 18:00
                      website: https://erp-dev.cloudsatlas.com.hk
                      isExcellent: false
                      isGenuine: true
                      collectCount: 0
                      isCollect: false
                      isExact: true
                      drugCount: 2
                      drugs:
                        - permitNo : HK-05357
                          name: ROCALTROL CAP 0.25UG
                        - permitNo : HK-07007
                          name: VENTOLIN INHALER 100MCG/METERED DOSE
