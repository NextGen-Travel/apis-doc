openapi: 3.0.1

info:
  title: 醫藥淘
  version: 1.0.0

servers:
  - url: http://localhost:1339/api/
  - url: https://api-dev.e-drugsearch.com.hk/api/

components:
  securitySchemes:
    user_token:
      in: header
      type: apiKey
      name: Authorization
      description: 藥房使用者 驗證需要的 token, Bearer xxx
    member_token:
      in: header
      type: apiKey
      name: Authorization
      description: member 驗證需要的 token, Bearer xxx
  parameters:
    visitor:
      in: header
      name: visitor
      schema:
        type: string
      required: true
      example: false663c8908-c8f8-4ea2-8869-5b1f42819a51
      description: visitor token，參數來源為 api/visitor/token 輸出的 data
    permitNo:
      in: path
      name: permitNo
      schema:
        type: string
      required: true
      example: HK-42682
      description: 藥品核准碼
    storeUUID:
      in: path
      name: uuid
      schema:
        type: string
      required: true
      example: bb9ae68e-e856-41cf-85f6-72f7c7a3716e
      description: 藥房唯一代碼
    postUUID:
      in: path
      name: uuid
      schema:
        type: string
      required: true
      example: bb9ae68e-e856-41cf-85f6-72f7c7a3716e
      description: 文章唯一代碼
    page:
      in: query
      name: pagination[page]
      schema:
        type: number
      required: true
      example: 1
    prepage:
      in: query
      name: pagination[pageSize]
      schema:
        type: number
      required: true
      example: 100
    language:
      in: header
      name: accept-language
      schema:
        type: string
      required: false
      example: 'en'
    locale:
      in: query
      name: locale
      schema:
        type: string
        enum: ['zh', 'en', 'zh-CN']
      description: 多語系輸出 繁體中文，英文，簡體中文
      required: false
      example: 'zh'
  schemas:
    DrugOptionsResponse:
      type: object
      properties:
        msg :
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              key:
                type: number
                description: 用來執行搜尋用的參數
              value:
                type: string
                description: 顯示名稱
    CoordinateResponse:
      type: object
      properties:
        lat:
          type: number
        lng:
          type: number
    StoresMedicineOptionsResponse:
      type: array
      items:
        type: object
        properties:
          uuid:
            type: string
            example: 'bb9ae68e-e856-41cf-85f6-72f7c7a3716e'
          name:
            type: string
            example: 'Nextgen'
          address:
            type: string
            example: Anhe Road, Daan District
          district:
            type: string
            example: Daan District
          lng:
            type: number
            example: 121.5493852
          lat:
            type: number
            example: 25.0260285
          distance:
            type: number
            example: 25
          contactNumber:
            type: string
            example: 2323232
          businessHours:
            type: string
            example: 09:00 ~ 18:00
          isExcellent:
            type: boolean
            example: false
          isGenuine:
            type: boolean
            example: true
          collectCount:
            type: number
            example: 0
          isExact:
            type: boolean
            example: true
          stockType:
            type: string
            example: lv1
          drugCount:
            type: number
            example: 2
          drugs:
            type: array
            items:
              type: object
              properties:
                permitNo:
                  type: string
                  example: HK-05357
                name:
                  type: string
                  example: ROCALTROL CAP 0.25UG
    DrugsResponse:
      type: array
      items:
        type: object
        properties:
          permitNo:
            type: string
            description: 用來執行搜尋用的參數
          name:
            type: string
            description: 顯示名稱
          nameZh:
            type: string
            description: 顯示名稱(中文)
          url:
            type: string
            description: 藥品圖示
          ingredients:
            type: array
            description: 顯示名稱
            items:
              type: string
    paginationResponse:
      type: object
      properties:
        page:
          type: integer
          description: 起始頁數
          example: 1
        pageSize:
          type: integer
          description: 每頁資料筆數
          example: 10
        pageCount:
          type: integer
          description: 總頁數
          example: 23
        total:
          type: integer
          description: 總筆數
          example: 236

paths:
  # ====================
  #
  # survey
  #

  /surveys/{uuid}:
    get:
      summary: 獲取問卷
      tags:
        - surveys
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
          description: uuid
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      title:
                        type: string
                      textThanks:
                        type: string
                      textWelcome:
                        type: string
                      surveyItems:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: number
                            rank:
                              type: number
                            title:
                              type: string
                            unique:
                              type: boolean
                            hidden:
                              type: boolean
                            desc:
                              type: string
                            disabled:
                              type: boolean
                            defaultValue:
                              type: string
                            required:
                              type: boolean
                            regexPattern:
                              type: string
                            options:
                              type: object
                              properties:
                                items:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      value:
                                        type: string
                                placeholder:
                                  type: string
                                display:
                                  type: string
                                  enum:
                                    - single
                                    - multiple
                            mode:
                              type: string
    post:
      summary: 提交問卷
      tags:
        - surveys
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
          description: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      value:
                        description: 項目值
                        example: "some value"
                      itemId:
                        type: number
                        description: 項目ID
                        example: 1
              required:
                - items
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string

  # ====================
  #
  # Faq
  #

  /faq-contents:
    get:
      summary: 獲取 faq 列表
      tags:
        - faq
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            title:
                              type: string
                            updatedAt:
                              type: string
                            id:
                              type: number
                            faq:
                              type: object
                              properties:
                                id:
                                  type: number
                                tag:
                                  type: object
                                  properties:
                                    id:
                                      type: number
                                    tagName:
                                      type: string
                                store:
                                  type: object
                                  properties:
                                    id:
                                      type: number
                                    name:
                                      type: string
  /faq-contents/{faqId}:
    get:
      summary: 獲取 faq 列表
      tags:
        - faq
      parameters:
        - in: path
          name: faqId
          required: true
          schema:
            type: string
          example: 1
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      title:
                        type: string
                      content:
                        type: string
                      updatedAt:
                        type: string
                      faq:
                        type: object
                        properties:
                          id:
                            type: number
                          tag:
                            type: object
                            properties:
                              id:
                                type: number
                              tagName:
                                type: string
                          store:
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                              website:
                                type: string
  # ====================
  #
  # Auth
  #

  /users-permissions/auth/login:
    post:
      summary: 後台使用者帳號登錄
      description: 後台使用者帳號登錄
      tags:
        - auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                account:
                  type: string
                  description: 帳號
                  example: 'dev'
                password:
                  type: string
                  description: 密碼
                  example: 'nextgen123'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      jwt:
                        type: string
                      user:
                        type: object
                        properties:
                          id:
                            type: number
                          username:
                            type: string
                          email:
                            type: string
                          provider:
                            type: string
                          confirmed:
                            type: boolean
                          blocked:
                            type: boolean
                          createdAt:
                            type: string
                          updatedAt:
                            type: string
                          store:
                            type: object
                            properties:
                              id:
                                type: number
                              uuid:
                                type: string
                              type:
                                type: string
                              name:
                                type: string
                              tel:
                                type: string
                              address:
                                type: string
                              district:
                                type: string
                              rxNo:
                                type: string
                              createdAt:
                                type: string
                              updatedAt:
                                type: string
                              publishedAt:
                                type: string

  /visitor/token/{mode}:
    get:
      summary: 取的訪問者 token
      description: 首次訪問，首次訪問該網站時呼叫，回傳的 data 用於記錄 訪客的 觀看紀錄
      tags:
        - visitor
      parameters:
        - in: path
          name: mode
          required: true
          schema:
            type: string
            enum: [web, app]
          example: web
          description: 訪客使用手機app或web
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: Success
                  data:
                    type: string
                    example: false663c8908-c8f8-4ea2-8869-5b1f42819a51
                    description: visitor token

  /visitor/drug/{permit_no}:
    post:
      summary: 記錄藥品查詢
      description: 取得藥品明細前需要先呼叫該api 用於統計
      tags:
        - visitor
      parameters:
        - $ref: '#/components/parameters/permitNo'
        - $ref: '#/components/parameters/visitor'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: Success

  /visitor/store/{uuid}:
    post:
      summary: 記錄藥房查詢
      description: 查詢藥房，取得藥房明細前需要先呼叫該api 用於統計
      tags:
        - visitor
      parameters:
        - $ref: '#/components/parameters/storeUUID'
        - $ref: '#/components/parameters/visitor'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: Success

  /visitor/post/{uuid}:
    post:
      summary: 記錄文章讀取
      description: 文章讀取，取得文章明細前需要先呼叫該api 用於統計
      tags:
        - visitor
      parameters:
        - $ref: '#/components/parameters/postUUID'
        - $ref: '#/components/parameters/visitor'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: Success
  /visitor/hot/search:
    get:
      summary: 熱搜
      description: 取得 熱搜
      tags:
        - visitor
      parameters:
        - in: query
          name: perPage
          schema:
            type: number
          description: 回傳的數量
        - in: query
          name: type
          required: true
          schema:
            type: string
            enum: [all, drug, store, post, stock]
          example: all
          description: 熱門收尋分類
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: string


  # ====================
  #
  # Member
  #

  /members/register:
    post:
      summary: 會員註冊 EYT 帳號
      description: 用 mobile/email 註冊，只能選一種不能同時存在
      tags:
        - member
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: test
                email:
                  type: string
                  example: test@123.com
                mobile:
                  type: string
                  example: '只有數字，ex: 0912345678'
                mobileCountryCode:
                  type: string
                  example: '只有數字，ex: 886'
                token:
                  type: string
                  example: 手機註冊要加這個 eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2ODUwNjY3MDEsImV4cCI6MTY4NTA2NzYwMX0.4Bl2Yk36k2sizsYAwxjWI-pqnqwwJpFlvU2n_pnjmjA
                password:
                  type: string
                  example: 123
                confirmPassword:
                  type: string
                  example: 123
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
  /members/login:
    post:
      summary: 會員登入 EYT email/mobile 註冊的帳號
      tags:
        - member
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: test@123.com
                password:
                  type: string
                  example: 123
                mobile:
                  type: string
                  example: '只有數字，ex: 0919123456'
                mobileCountryCode:
                  type: string
                  example: '只有數字，ex: 886'
                token:
                  type: string
                  example: 手機的驗證碼登入 eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2ODUwNjY3MDEsImV4cCI6MTY4NTA2NzYwMX0.4Bl2Yk36k2sizsYAwxjWI-pqnqwwJpFlvU2n_pnjmjA
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      jwt:
                        type: string
                      member:
                        type: object
                        properties:
                          id:
                            type: number
                          uuid:
                            type: string
                          name:
                            type: string
                          email:
                            type: string
                          avatar:
                            type: string
                            example: "https://s3.ap-southeast-1.amazonaws.com/medicine-s3.cloudsatlas.com.hk/2023_05_10_4_24_27_175189b4cb.png"

  /members/third-party-callback:
    post:
      summary: 第三方綁定或登入
      description: 舊用戶第三方登入 or 新用戶第三方註冊 or 舊用戶綁定新的第三方(這個要帶 header) 三個都是打這支
      tags:
        - member
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                sessionId:
                  type: string
                  description: oauth 那支跟後端拿到的 sessionId
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      msg:
                        type: string
                      jwt:
                        type: string
                      member:
                        type: object
                        properties:
                          id:
                            type: number
                          uuid:
                            type: string
                          name:
                            type: string
                          email:
                            type: string
                          avatar:
                            type: string
                      thirdPartyLogin:
                        type: object
                        properties:
                          id:
                            type: number
                          platform:
                            type: string
                          openId:
                            type: string
                          email:
                            type: string

  /wechatSignature:
    get:
      summary: 取得微信的簽名
      tags:
        - member 
      parameters:   
        - in: query
          name: url
          schema:
            type: string
          description: url        
          required: false                      
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      signature:
                        type: string
                      nonceStr:
                        type: string
                      timestamp:
                        type: number
                      url:
                        type: string
                      appId:
                        type: string
                      ticket:
                        type: string

  /hcaptcha-verify:
    post:
      summary: 登入機器人驗證
      description: 登入前請先call此api，驗證通過後再call登入的api
      tags:
        - member
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: string
              properties:
                h-captcha-response:
                  type: string
                  description: 從hcaptcha 得到的token
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      msg:
                        type: string
  # ====================
  #
  # verification code
  #

  /verification-code/{action}:
    post:
      summary: 忘記密碼/註冊帳號/手機登入 拿驗證碼
      description: 打這個 api 後，申請的信箱會收到一封驗證碼的信
      tags:
        - verification-code
      parameters:
        - in: path
          required: true
          name: action
          schema:
            type: string
          description: 用途，忘記密碼 forgot-password / 註冊 register / 手機登入 login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: member 信箱
                  example: test@123.com
                mobile:
                  type: string
                  example: '只有數字，ex: 0919123456'
                mobileCountryCode:
                  type: string
                  example: '只有數字，ex: 886'
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: Success.
                  data:
                    type: object
                    properties:
                      token:
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2ODQzOTExMjEsImV4cCI6MTY4NDM5MjAyMX0.eE00SIAyBBbWkIkSg6lklG-jwAveTnBGml6wCxTrxeE
                      verificationCode:
                        type: string
                        example: 12345

  /verification-code/verify:
    post:
      summary: verify 驗證碼
      tags:
        - verification-code
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string
                  description: 上一步拿到的 token
                  example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2ODQzOTIxNDMsImV4cCI6MTY4NDM5MzA0M30.agDt9R_X33r4ryE-v3jXklHoqdg9tz2OzC08KSHyPEM
                verificationCode:
                  type: string
                  description: 發到信箱的六碼驗證碼
                  example: 161321
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: Success
  /verification-code/reset-password:
    post:
      summary: 用 token 重設密碼
      tags:
        - verification-code
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string
                  description: 上一步拿到的 token
                  example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2ODQzOTIxNDMsImV4cCI6MTY4NDM5MzA0M30.agDt9R_X33r4ryE-v3jXklHoqdg9tz2OzC08KSHyPEM
                newPassword:
                  type: string
                confirmNewPassword:
                  type: string
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: Success
  # ====================
  #
  # Contact-us
  #

  /contact-uses/connect:
    post:
      summary: 聯絡我們
      tags:
        - contact-us
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: 小明
                phone:
                  type: string
                  example: '0912345678'
                email:
                  type: string
                  example: nextgen@nextgen.com.hk
                title:
                  type: string
                  example: 主旨
                type:
                  type: string
                  example: 醫藥淘相關問題
                content:
                  type: string
                  example: 訊息內容

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: Success

  # ====================
  #
  # posts
  #

  /all/posts:
    get:
      summary: 獲取文章列表
      tags:
        - posts
      parameters:
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言  
        - in: query
          name: keyword
          schema:
            type: string
          description: 關鍵字搜尋(title, content, tags, store, type)-模糊搜尋
        - in: query
          name: category
          schema:
            type: string
          description: 分類篩選
        - in: query
          name: startTime
          schema:
            type: string
            minimum: 1
          description: 篩選功能(文章發佈時間)   
        - in: query
          name: endTime
          schema:
            type: string
          description: 篩選功能(文章發佈時間)   
        - in: query
          name: storeName
          schema:
            type: string
            minimum: 1
          description: 篩選功能-來源名稱（精準搜尋）     
        - in: query
          name: sort
          schema:
            type: string
            enum: [nameAsc, nameDesc,timeAsc,timeDesc, collectDesc, priorityDesc]
          description: 排序功能
        - in: query
          name: perPage
          schema:
            type: integer
          description: 單頁筆數
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
          description: 第幾頁                         
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        uuid:
                          type: string
                          description: 文章uuid
                        title:
                          type: string
                          description: 文章標題
                        content:
                          type: string
                          description: 文章內容
                        type:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 分類的名稱
                        viewCount:
                          type: number
                          description: 文章瀏覽數
                        store:
                          type: object
                          properties:
                            uuid:
                              type: string
                              description: 來源的uuid
                            name:
                              type: string
                              description: 文章來源
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                                description: 標籤名稱
                        publishedAt:
                          type: string
                        collectCount:
                          type: number
                          description: 收藏數
                        seoDescription:
                          type: string
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                        description: 當前頁面
                      pageSize:
                        type: number
                        description: 每頁筆數
                      pageCount:
                        type: number
                        description: 總共頁數
                      total:
                        type: number
                        description: 總共筆數                          

  /all/posts/{uuid}:
    get:
      summary: 獲取指定文章
      tags:
        - posts
      parameters:
        - name: uuid
          in: path
          description: 文章uuid
          required: true
          example: e6d37477-7224-4fb6-a56a-d860228d48f4
          schema:
            type: string
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  post:
                    type: object
                    properties:
                      uuid:
                        type: string
                        description: 文章uuid
                      title:
                        type: string
                        description: 文章標題
                      content:
                        type: string
                        description: 文章內容
                      store:
                        type: object
                        properties:
                          uuid:
                            type: string
                            description: 文章來源uuid
                          name:
                            type: string
                            description: 文章來源
                      type:
                        type: object
                        properties:
                          id:
                            type: number
                          name:
                            type: string
                            description: 分類的名稱
                      viewCount:
                        type: number
                        description: 文章瀏覽數
                      image:
                        type: string
                      tags:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: hashTag 名稱
                      publishedAt:
                        type: string
                      collectCount:
                        type: number
                        description: 文章收藏數

  /all/posts/{uuid}/extends:  
    get:
      summary: 獲取延伸閱讀文章 三篇
      tags:
        - posts
      parameters:
        - name: uuid
          in: path
          description: 文章uuid
          required: true
          example: 3
          schema:
            type: string 
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言  
        - in: query
          name: limit
          schema:
            type: number
          description: 回傳的數量                             
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        uuid:
                          type: string
                          description: 文章uuid
                        title:
                          type: string
                        content:
                          type: string
                        type:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 分類的名稱
                        viewCount:
                          type: number
                        image:
                          type: string
                        store:
                          type: object
                          properties:
                            uuid:
                              type: string
                            name:
                              type: string
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                        publishedAt:
                          type: string
                        collectCount:
                          type: number

  /new/posts:  
    get:
      summary: 獲取最新文章
      tags:
        - posts
      parameters:
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言  
        - in: query
          name: limit
          schema:
            type: number
          description: 回傳的數量           
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        uuid:
                          type: string
                          description: 文章uuid
                        title:
                          type: string
                          description: 文章標題
                        content:
                          type: string
                          description: 文章內容
                        type:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 分類的名稱
                        viewCount:
                          type: number
                          description: 文章瀏覽數
                        image:
                          type: string
                        store:
                          type: object
                          properties:
                            uuid:
                              type: string
                            name:
                              type: string
                              description: 文章來源
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                        publishedAt:
                          type: string
                        collectCount:
                          type: number
                          description: 文章收藏數

  /type/posts:  
    get:
      summary: 依照type撈取三篇最新的文章
      tags:
        - posts
      parameters:
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言  
        - in: query
          name: limit
          schema:
            type: number
          description: 回傳的數量                 
        - in: query
          name: type
          schema:
            type: string
            enum: [latestNews, drugDonations, newDevelopmentsAboutMedicine, policyPromotion]
          description: type的名稱        
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        uuid:
                          type: string
                          description: 文章uuid
                        title:
                          type: string
                          description: 文章標題
                        content:
                          type: string
                          description: 文章內容
                        type:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 分類的名稱
                        viewCount:
                          type: number
                          description: 文章瀏覽數
                        image:
                          type: string
                        store:
                          type: object
                          properties:
                            uuid:
                              type: string
                            name:
                              type: string
                              description: 文章來源
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                        publishedAt:
                          type: string
                        collectCount:
                          type: number
                          description: 文章收藏數

  /posts/tag/{tagId}:  
    get:
      summary: 搜尋具有特定tag的文章
      tags:
        - posts
      parameters:
        - in: path
          name: tagId
          required: true
          schema:
            type: string
          description: tag id  
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言            
        - in: query
          name: perPage
          schema:
            type: integer
          description: 單頁筆數
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
          description: 第幾頁  
        - in: query
          name: sort
          schema:
            type: string
            enum: [nameAsc, nameDesc,timeAsc,timeDesc, collectDesc, priorityDesc]
          description: 排序功能                             
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        uuid:
                          type: string
                          description: 文章uuid
                        title:
                          type: string
                          description: 文章標題
                        content:
                          type: string
                          description: 文章內容
                        type:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 分類的名稱
                        viewCount:
                          type: number
                          description: 文章瀏覽數
                        store:
                          type: object
                          properties:
                            uuid:
                              type: string
                            name:
                              type: string
                              description: 文章來源
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                                description: 標籤名稱
                        publishedAt:
                          type: string
                        collectCount:
                          type: number
                          description: 收藏數
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                        description: 當前頁面
                      pageSize:
                        type: number
                        description: 每頁筆數
                      pageCount:
                        type: number
                        description: 總共頁數
                      total:
                        type: number
                        description: 總共筆數

  /posts/store/{uuid}:  
    get:
      summary: 根據store uuid 搜尋文章
      tags:
        - posts
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
          description: store uuid  
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [ zh, zh-CN, en]
          description: 文章的語言            
        - in: query
          name: perPage
          schema:
            type: integer
          description: 單頁筆數
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
          description: 第幾頁
        - in: query
          name: sort
          schema:
            type: string
            enum: [nameAsc, nameDesc,timeAsc,timeDesc, collectDesc, priorityDesc]
          description: 排序功能                               
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        uuid:
                          type: string
                          description: 文章標題
                        title:
                          type: string
                          description: 文章標題
                        content:
                          type: string
                          description: 文章內容
                        type:
                          type: object
                          properties:
                            id:
                              type: number
                            name:
                              type: string
                              description: 分類的名稱
                        viewCount:
                          type: number
                          description: 文章瀏覽數
                        store:
                          type: object
                          properties:
                            uuid:
                              type: string
                            name:
                              type: string
                              description: 文章來源
                        tags:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              name:
                                type: string
                                description: 標籤名稱
                        publishedAt:
                          type: string
                        collectCount:
                          type: number
                          description: 收藏數
                  pagination:
                    type: object
                    properties:
                      page:
                        type: number
                        description: 當前頁面
                      pageSize:
                        type: number
                        description: 每頁筆數
                      pageCount:
                        type: number
                        description: 總共頁數
                      total:
                        type: number
                        description: 總共筆數

  /posts/{uuid}/categories:  
    get:
      summary: 獲取文章的分類麵包屑
      parameters:
        - in: path
          name: uuid
          required: true
          schema:
            type: string
          description: post uuid  
      tags:
        - posts
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: number
                    name:
                      type: string
  /postTypes:
    get:
      summary: 獲取文章類別 id 及 name 及 typeName
      tags:
        - posts 
      parameters:
        - in: header
          name: accept-language
          schema:
            type: string
            enum: [zh, zh-CN, en]
          description: 文章類別的語言 
        - in: query
          name: type
          schema:
            type: string
            enum: [latestNews, drugDonations, newDevelopmentsAboutMedicine, policyPromotion]
          description: type的名稱                        
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        typeName:
                          type: string  

  /posts/uploadImages:
    post:
      summary: 上傳文章圖片
      tags:
        - posts
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary

              required:
                - image
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      url:
                        type: string

  # ====================
  #
  # stores
  #

  /stores/list:
    get:
      summary: 獲取商店的id及name
      tags:
        - stores
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string

  # ====================
  #
  # tags
  #

  /all/tags:
    get:
      summary: 獲取tags
      tags:
        - tags
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        parent:
                          description: 如果有上一層的標籤，則會給上一層標籤的id，不然會給空字串
                          oneOf:
                            - type: string
                            - type: number
    post:
      summary: 建立tag
      tags:
        - tags
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                parent:
                  type: number
                  description: 標籤的父層
                tagName:
                  type: string
                  description: 標籤名稱
                type:
                  type: string
                  description: 該標籤是屬於分類還是一般標籤，default為 hashTag，分類則帶值categories
                  example: categories
                locale:
                  type: string
                  enum: ['zh', 'en', 'zh-CN']
                  description: 文章語言，上面分別對應 繁體中文，英文，簡體中文
              required:
                - tagName
                - locale

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      tagName:
                        type: string
                      parent:
                        type: object
                        properties:
                          id:
                            type: number
                            description: 父層tag的名稱（只會有一個父層）
                          tagName:
                            type: string
                            description: 父層tag的名稱（只會有一個父層）
                      children:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: number
                              description: 子層tag的名稱
                            tagName:
                              type: string
                              description: 子層tag的名稱

        '500':
          description: 伺服器錯誤
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      msg:
                        type: string
                        example:  伺服器錯誤
        '400':
          description: 失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      msg:
                        type: string
                        example:  建立失敗              

  /all/tags/{id}:
    get:
      summary: 獲取該tag 當前語系的 tag name, 如果沒有則回傳預設語系內容
      tags:
        - tags
      parameters:
        - name: id
          in: path
          description: tag id
          required: true
          example: 3
          schema:
            type: string
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      tagName:
                        type: string

    put:
      summary: 修改tag
      tags:
        - tags
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                parent:
                  type: number
                  description: 標籤的父層
                tagName:
                  type: string
                  description: 標籤名稱
                type:
                  type: number
                  description: 該標籤是屬於分類還是一般標籤，default為 hashTag，分類則帶值categories
                  example: hashTag
                locale:
                  type: string
                  enum: ['zh', 'en', 'zh-CN']
                  description: 文章語言，上面分別對應 繁體中文，英文，簡體中文

      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: number
                      tagName:
                        type: string
                      type:
                        type: string
                      parent:
                        type: object
                        properties:
                          id:
                            type: number
                          tagName:
                            type: string
                      children:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: number
                            tagName:
                              type: string              
  # ====================
  #
  # categories
  #

  /categories/posts:
    get:
      summary: 獲取文章的categories
      tags:
        - categories
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string   
                        parent_id:
                          description: 如果有上一層的標籤，則會給上一層標籤的id，不然會給空字串
                          oneOf:
                            - type: string
                            - type: number
  # ====================
  #
  # subscribes
  #

  /subscribe/list:
    get:
      summary: 獲取訂閱的選項
      tags:
        - subscribe
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  types:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                  tags:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        locale:
                          type: string
                        tagName:
                          type: string


  /general/subscribe:
    post:
      summary: 非會員訂閱
      tags:
        - subscribe
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description:  訂閱的信箱
                types:
                  type: string
                  description: 追蹤的來源
                  example: 1,2,3
                tags:
                  type: string
                  description: 追蹤的分類
                  example: 2,4,7

              required:
                - email
 
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string


  /subscribe/cancel/{uuid}:
    post:
      summary: 取消訂閱（不論會員非會員）
      tags:
        - subscribe
      parameters:
        - name: uuid
          in: path
          description: 訂閱的uuid
          required: true
          example: f6bd3fe9-62ae-4f68-9a78-5779880571812
          schema:
            type: string   
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string


  # ====================
  #
  # drug
  #

  /drugs/options/holders:
    get:
      summary: 持有人
      description: "取得持有人"
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 3M HONG KONG LTD
                    - key: 2
                      name: A P TECHNOTRADE CO

  /drugs/options/ingredients:
    get:
      summary: 藥品成分
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: sulfadiazine silver
                    - key: 2
                      name: cetrimide

  /drugs/options/tags:
    get:
      summary: 藥品分類
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 中樞神經系統藥物
                    - key: 2
                      name: 傷風感冒藥

  /drugs/options/saleRequirements:
    get:
      summary: 銷售要求
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: Over The Counter/For Animal Feeds
                    - key: 2
                      name: Over-The-Counter Medicines

  /drugs/options/brands:
    get:
      summary: 品牌
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 普拿疼
                    - key: 2
                      name: 伏冒

  /drugs/options/legalClassification:
    get:
      summary: 藥品管制分類
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: Antibiotic
                    - key: 2
                      name: Exempted Antibiotic
                    - key: 3
                      name: Not A Poison

  /drugs/usages:
    get:
      summary: 藥劑使用方式
      tags:
        - drug
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        key:
                          type: string
                        value:
                          type: string
                        name:
                          type: string
                        nameEn:
                          type: string
                        nameZh:
                          type: string
  /drugs/dosageForms:
    get:
      summary: 藥劑類型
      tags:
        - drug
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        key:
                          type: string
                        value:
                          type: string
                        name:
                          type: string
                        nameEn:
                          type: string
                        nameZh:
                          type: string
  /drugs/dosageUnits:
    get:
      summary: 藥劑單位
      tags:
        - drug
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        key:
                          type: string
                        value:
                          type: string
                        name:
                          type: string
                        nameEn:
                          type: string
                        nameZh:
                          type: string

  /drugs/options/names:
    get:
      summary: 藥品名稱
      tags:
        - drug
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 0.015% CHLORHEXIDINE & 0.15% CETRIMIDE SOL
                      name: 0.015% CHLORHEXIDINE & 0.15% CETRIMIDE SOL
                      permitNo: HK-42682
                    - key: 0.05% CHLORHEXIDINE & 0.5% CETRIMIDE SOL
                      name: 0.05% CHLORHEXIDINE & 0.5% CETRIMIDE SOL
                      permitNo: HK-42684

  /search/drugs:
    get:
      summary: 藥品搜尋
      tags:
        - drug
      parameters:
        - $ref: '#/components/parameters/visitor'
        - in: query
          name: ingredient
          schema:
            type: integer
          description: 藥品成分 id
        - in: query
          name: holder
          schema:
            type: integer
          description: 證書持有人id
        - in: query
          name: tags
          schema:
            type: string
          description: 藥品分類
        - in: query
          name: saleRequirement
          schema:
            type: string
          description: 銷售要求
        - in: query
          name: legalClassification
          schema:
            type: integer
          description: 藥品管制分類
        - in: query
          name: brand
          schema:
            type: integer
          description: 品牌
        - in: query
          name: name
          schema:
            type: string
          description: 藥品名稱
        - in: query
          name: prefixName
          schema:
            type: string
          description: 藥品字首
        - in: query
          name: permitNo
          schema:
            type: string
          description: permit No
        - in: query
          name: keyword
          schema:
            type: string
          description: 藥品名稱(中英), 名稱, 核准碼, 主成份, SKU
        - in: query
          name: imgKey
          schema:
            type: string
          description: 圖片搜尋，須先呼叫 api/search/drugs/uploadImages，成功上傳圖檔，取得回傳的 imgKey
        - in: query
          name: sort
          schema:
            type: string
            enum: [nameAsc, nameDesc,collectDesc]
          description: 排序功能
        - in: query
          name: perPage
          schema:
            type: integer
          description: 每頁筆數
        - in: query
          name: page
          schema:
            type: integer
          description: 頁碼
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg :
                      type: string
                    data:
                      $ref: '#/components/schemas/DrugsResponse'
                    pagination:
                      $ref: '#/components/schemas/paginationResponse'
                example:
                  msg : Success
                  pagination :
                    page: 1
                    pageSize: 50
                    pageCount: 1
                    total: 1
                  data:
                    - permitNo: HK-21197
                      name: MARSEDYL ELIXIR
                      nameZh: 萬咳療
                      url: https://dcq8lblln1b30.cloudfront.net/assets/images/1673839860.png
                      ingredients:
                        - codeine phosphate
                        - ephedrine hydrochloride
                        - promethazine hydrochloride

  /search/drugs-with-photo:
    post:
      summary: 用 base64 搜尋藥品
      tags:
        - drug
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                image:
                  type: string
              required:
                - image
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg :
                      type: string
                    data:
                      $ref: '#/components/schemas/DrugsResponse'
                    pagination:
                      $ref: '#/components/schemas/paginationResponse'
                example:
                  msg : Success
                  pagination :
                    page: 1
                    pageSize: 50
                    pageCount: 1
                    total: 1
                  data:
                    - permitNo: HK-21197
                      name: MARSEDYL ELIXIR
                      nameZh: 萬咳療
                      url: https://dcq8lblln1b30.cloudfront.net/assets/images/1673839860.png
                      ingredients:
                        - codeine phosphate
                        - ephedrine hydrochloride
                        - promethazine hydrochloride

  /drugs/detail/{permitNo}:
    get:
      summary: 藥品明細
      tags:
        - drug
      parameters:
        - $ref: '#/components/parameters/visitor'
        - $ref: '#/components/parameters/permitNo'
        - in: query
          name: district
          explode: true
          schema:
            type: array
            items:
              type: string
          description: 指定行政區
        - in: query
          name: area
          schema:
            type: string
          description: 指定搜尋區域
        - in: query
          name: lat
          schema:
            type: integer
          description: 緯度
        - in: query
          name: lng
          schema:
            type: integer
          description: 經度
        - in: query
          name: storeCount
          schema:
            type: integer
          description: 輸出可購買的藥房數量
          example: 3
        - in: query
          name: isRandom
          schema:
            type: integer
          description: 隨機輸出可購買的藥房，未帶參數會預設為1
          example: 1
        - in: query
          name: similarCount
          schema:
            type: integer
          description: 輸出相似藥品的數量，未帶預設為 3 筆
          example: 3
        - in: query
          name: isStock
          schema:
            type: integer
          description: 輸出的相似藥品需要有庫存，未帶參數會預設為 0，僅判斷是否為相似藥品
          example: 0
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg:
                      type: string
                    data:
                      type: object
                      properties:
                        permitNo:
                          type: string
                        precaution:
                          type: string
                        indication:
                          type: string
                        holder:
                          type: object
                          properties:
                            name:
                              type: string
                            address:
                              type: string
                        name:
                          type: string
                        nameZh:
                          type: string
                        aka:
                          type: string
                        dosageForm:
                          type: string
                        usage:
                          type: string
                        sideEffect:
                          type: string
                        legalClassification:
                          type: string
                        saleRequirement:
                          type: string
                        registrationDate:
                          type: string
                        nonRegistrationDate:
                          type: string
                        ingredients:
                          type: array
                          items:
                            type: string
                        tags:
                          type: array
                          items:
                            type: string
                        brand:
                          type: string
                        urls:
                          type: array
                          items:
                            type: string
                        packages:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: number
                              dosage:
                                type: number
                              usage:
                                type: string
                              unit:
                                type: string
                              sku:
                                type: string
                              createdAt:
                                type: string
                              updatedAt:
                                type: string
                              name:
                                type: string
                              dosageForm:
                                type: string
                              urls:
                                type: array
                                items:
                                  type: string
                        similarDrug:
                          $ref: '#/components/schemas/DrugsResponse'
                        coordinate:
                          $ref: '#/components/schemas/CoordinateResponse'
                        stores:
                          $ref: '#/components/schemas/StoresMedicineOptionsResponse'
                example:
                  msg : Success
                  data:
                    - permitNo: HK-65977
                      name: MAX COLTALIN COUGH HOT REMEDY POWDER FOR ORAL SOLUTION
                      nameZh: 幸福傷風咳-熱飲5包
                      aka: 幸福傷風咳
                      dosageForm: powder
                      usage: oral
                      precaution: 測試資料
                      indication:
                      legalClassification: Not A Poison
                      saleRequirement: Over-The-Counter Medicines
                      registrationDate: 2018-11-14
                      url: https://dcq8lblln1b30.cloudfront.net/assets/images/1673839860.png
                      tags:
                        - 西藥
                        - 感冒藥
                      ingredients:
                        - guaifenesin
                        - paracetamol
                        - phenylephrine hydrochloride
                      urls:
                        - https://s3.ap-southeast-1.amazonaws.com/medicine-s3.cloudsatlas.com.hk/017b5138_8b8c_4e50_947a_11b2e09f1e34_a1b70956e7.png
                        - https://s3.ap-southeast-1.amazonaws.com/medicine-s3.cloudsatlas.com.hk/42e68e79_ee43_4f11_bd64_4108527a0712_d018c4fc13.png
                        - https://s3.ap-southeast-1.amazonaws.com/medicine-s3.cloudsatlas.com.hk/f0db146f_7cea_4ae0_abab_000c3e70ddfb_1087e50d9e.png
                      packages:
                        sku: 3514671130562
                        name: 幸福傷風咳-熱飲5包
                        dosage: 1
                        unit: sachet
                        urls:
                          - https://s3.ap-southeast-1.amazonaws.com/medicine-s3.cloudsatlas.com.hk/f0db146f_7cea_4ae0_abab_000c3e70ddfb_a1c38f0e0f.png
                      holder:
                        name: FP HEALTHCARE LIMITED
                        address: FLAT/RM A, 3/F, SUN KING FACTORY BUILDING, 1-7, SHING CHUEN ROAD, TAI WAI, SHATIN, NEW TERRITORIES
                      coordinate:
                        lat: 22.3530251
                        lng: 113.9628303
                      stores:
                        - uuid: bb9ae68e-e856-41cf-85f6-72f7c7a3716e
                          stockType: lv1
                          name: Nextgen
                          address: Anhe Road, Daan District
                          lat: 25.0260285
                          lng: 121.5493852
                          distance: 21
                          contactNumber: 2323232
                          businessHours: 09:00 ~ 18:00
                          website: https://erp-dev.cloudsatlas.com.hk
                          isExcellent: false
                          isGenuine: true
                          collectCount: 0
                          isExact: true
                          drugCount: 2
                          drugs:
                            - permitNo : HK-05357
                              name: ROCALTROL CAP 0.25UG
                            - permitNo : HK-07007
                              name: VENTOLIN INHALER 100MCG/METERED DOSE

  # ====================
  #
  # stores 藥房搜尋
  #

  /stores/options/stockTypes:
    get:
      summary: 庫存類型
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/locale'
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: lv1
                      value: 即時庫存
                    - key: lv2
                      value: 非即時庫存
                    - key: lv3
                      value: 無庫存資料

  /stores/options/mainServices:
    get:
      summary: 主要服務類型
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/locale'
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 處方藥配藥
                    - key: 2
                      name: 藥品諮詢
                    - key: 3
                      name: 零售藥品與健康食品

  /stores/options/services:
    get:
      summary: 服務類型
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/locale'
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 處方藥配藥服務
                    - key: 2
                      name: 非處方藥和保健品的銷售
                    - key: 3
                      name: 中醫藥建議和配方

  /stores/options/tags:
    get:
      summary: 服務類型
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/locale'
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/DrugOptionsResponse'
                example:
                  msg : Success
                  data:
                    - key: 1
                      name: 24 小時營業
                    - key: 2
                      name: 線上藥師諮詢

  /stores/options/districts:
    get:
      summary: 取的香港行政區域
      tags:
        - stores
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg :
                      type: string
                    data:
                      type: array
                      items:
                        type: object
                        properties:
                          key:
                            type: string
                            description: 行政區域代碼
                          value:
                            type: string
                            description: 行政區域 名稱
                          areaKey:
                            type: string
                            description: 區域代碼
                          area:
                            type: string
                            description: 區域名稱
                example:
                  msg : Success
                  data:
                    - key: EASTERN
                      value: 東區
                      areaKey: HONG_KONG_ISLAND
                      area: 香港島
                    - key: WAN_CHAI
                      value: 灣仔區
                      areaKey: HONG_KONG_ISLAND
                      area: 香港島
                    - key: SAI_KUNG
                      value: 西貢區
                      areaKey: NEW_TERRITORIES
                      area: 新界

  /search/stores:
    get:
      summary: 藥房
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/visitor'
        - in: query
          name: isPriority
          schema:
            type: integer
            enum: [0,1]
          required: false
          description: 啟用優先度輸出，isPriority=1
          example: 0
        - in: query
          name: isGenuine
          schema:
            type: string
          description: 正版正貨 0,1
        - in: query
          name: isExcellent
          schema:
            type: string
          description: 信心保證 0,1
        - in: query
          name: tags
          schema:
            type: string
          description: tags 篩選
        - in: query
          name: mainServices
          schema:
            type: string
          description: 主要服務篩選
        - in: query
          name: services
          schema:
            type: integer
          description: 服務篩選
        - in: query
          name: stockType
          schema:
            type: array
            items:
              type: string
            description: 庫存類型 lv1,lv2,lv3
            example: ['lv1', 'lv2']
        - in: query
          name: area
          schema:
            type: string
          description: 指定搜尋區域
        - in: query
          name: district
          explode: true
          schema:
            type: string
          description: 指定行政區
        - in: query
          name: keyword
          schema:
            type: string
          description: 藥房名稱(中英), 電話, 區域, 分區, 地址, 主要服務項目, 服務項目, tags
        - in: query
          name: sort
          schema:
            type: string
            enum: [nameAsc, nameDesc,collectDesc]
          description: 排序功能
        - in: query
          name: perPage
          schema:
            type: integer
          description: 每頁筆數
        - in: query
          name: page
          schema:
            type: integer
          description: 頁碼
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg:
                      type: string
                    data:
                          type: array
                          items:
                            type: object
                            properties:
                              uuid:
                                type: string
                              stockType:
                                type: string
                              nameEn:
                                type: string
                              name:
                                type: string
                              address:
                                type: string
                              lat:
                                type: number
                              lng:
                                type: number
                              contactNumber:
                                type: string
                              businessHours:
                                type: string
                              isExcellent:
                                type: boolean
                              isGenuine:
                                type: boolean
                              website:
                                type: string
                              plan:
                                type: object
                                properties:
                                  wechat:
                                    type: boolean
                                  website:
                                    type: boolean
                                  facebook:
                                    type: boolean
                                  whatsapp:
                                    type: boolean
                                  instagram:
                                    type: boolean
                                  navigation:
                                    type: boolean
                                  contactNumber:
                                    type: boolean
                              districtKey:
                                type: string
                              areaKey:
                                type: string
                              district:
                                type: string
                              area:
                                type: string
                              collectCount:
                                type: number
                              tags:
                                type: array
                                items:
                                  type: string
                              tagKey:
                                type: array
                                items:
                                  type: number
                              mobileCountryCode:
                                type: string
                              mainServices:
                                type: array
                                items:
                                  type: string
                              mainServiceKey:
                                type: array
                                items:
                                  type: number
                              mainServiceIcon:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    key:
                                      type: number
                                    name:
                                      type: string
                                    icon:
                                      type: string
                              imgUrl:
                                type: string
                example:
                  msg : Success
                  data:
                    - uuid: bb9ae68e-e856-41cf-85f6-72f7c7a3716e
                      stockType: lv3
                      nameEn: Nextgen
                      name: Nextgen
                      districtKey: EASTERN
                      areaKey: HONG_KONG_ISLAND
                      district: 東區
                      area: 香港島
                      address: Anhe Road, Daan District
                      lat: 25.0260285
                      lng: 121.5493852
                      contactNumber: 2323232
                      businessHours: 09:00 ~ 18:00
                      website: https://erp-dev.cloudsatlas.com.hk
                      plan:
                        wechat: false
                        facebook: false
                        whatsapp: false
                        instagram: false
                        navigation: false
                        website: false
                      isExcellent: false
                      isGenuine: true
                      collectCount: 0
                      imgUrl: https://dcq8lblln1b30.cloudfront.net/assets/images/1673839860.png
                      tags:
                        - 24小時營業
                        - 線上藥師諮詢
                        - 連鎖藥房
                      tagKey:
                        - 254
                        - 255
                        - 256
                      mainServices:
                        - 處方藥配藥
                        - 藥品諮詢
                        - 零售藥品與健康食品
                      mainServicesKey:
                        - 254
                        - 255
                        - 256
                      mainServiceIcon:
                        - key : 254
                          name: 處方藥配藥
                          icon: chat-question-outline
                        - key : 255
                          name: 藥品諮詢
                          icon: chat-question-outline
                        - key : 256
                          name: 零售藥品與健康食品
                          icon: chat-question-outline

  /stores/detail/{uuid}:
    get:
      summary: 藥房
      tags:
        - stores
      parameters:
        - $ref: '#/components/parameters/visitor'
        - $ref: '#/components/parameters/storeUUID'
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg:
                      type: string
                    data:
                      type: object
                      properties:
                        uuid:
                          type: string
                        stockType:
                          type: string
                        nameEn:
                          type: string
                        name:
                          type: string
                        address:
                          type: string
                        lat:
                          type: number
                        lng:
                          type: number
                        contactNumber:
                          type: string
                        businessHours:
                          type: string
                        isExcellent:
                          type: boolean
                        isGenuine:
                          type: boolean
                        website:
                          type: string
                        content:
                          type: string
                        mobileCountryCode:
                          type: string
                        plan:
                          type: object
                          properties:
                            wechat:
                              description: 當值是 false 代表沒使用
                              oneOf:
                                - type: boolean
                                - type: object
                                  properties:
                                    appId:
                                      type: string
                                    title:
                                      type: string
                                    qrcode:
                                      type: string
                            messanger:
                              description: 當值是 false 代表沒使用
                              oneOf:
                                - type: boolean
                                - type: string
                            whatsapp:
                              description: 當值是 false 代表沒使用
                              oneOf:
                                - type: boolean
                                - type: string
                            instagram:
                              description: 當值是 false 代表沒使用
                              oneOf:
                                - type: boolean
                                - type: string
                            email:
                              description: 當值是 false 代表沒使用
                              oneOf:
                                - type: boolean
                                - type: string
                            website:
                              description: 當值是 false 代表不顯示，實際值參照本身回傳的 website
                              type: boolean
                            navigation:
                              description: 當值是 false 代表不顯示
                              type: boolean
                            contactNumber:
                              description: 當值是 false 代表不顯示，實際值參照本身回傳的 contactNumber
                              type: boolean
                        district:
                          type: string
                        area:
                          type: string
                        collectCount:
                          type: number
                        imgUrls:
                          type: array
                          items:
                            type: string
                        tags:
                          type: array
                          items:
                            type: string
                        tagKey:
                          type: array
                          items:
                            type: number
                        mainServiceIcon:
                          type: array
                          items:
                            type: object
                            properties:
                              key:
                                type: number
                              name:
                                type: string
                              icon:
                                type: string
                        mainServices:
                          type: array
                          items:
                            type: string
                        mainServiceKey:
                          type: array
                          items:
                            type: number
                        services:
                          type: array
                          items:
                            type: string
                        serviceKey:
                          type: array
                          items:
                            type: number
                    pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            description: 起始頁數
                          pageSize:
                            type: integer
                            description: 每頁資料筆數
                          pageCount:
                            type: integer
                            description: 總頁數
                          total:
                            type: integer
                            description: 總筆數
                example:
                  msg : Success
                  pagination :
                    page: 1
                    pageSize: 50
                    pageCount: 1
                    total: 1
                  data:
                    uuid: bb9ae68e-e856-41cf-85f6-72f7c7a3716e
                    stockType: lv3
                    nameEn: Nextgen
                    name: Nextgen
                    district: 東區
                    area: 香港島
                    address: Anhe Road, Daan District
                    lat: 25.0260285
                    lng: 121.5493852
                    contactNumber: 2323232
                    businessHours: 09:00 ~ 18:00
                    website: https://erp-dev.cloudsatlas.com.hk
                    plan:
                      wechat: false
                      facebook: false
                      whatsapp: false
                      instagram: false
                      navigation: false
                      website: false
                    isExcellent: false
                    isGenuine: true
                    collectCount: 0
                    imgUrls:
                      - https://dcq8lblln1b30.cloudfront.net/assets/images/1673839860.png
                    tags:
                      - 24小時營業
                      - 線上藥師諮詢
                      - 連鎖藥房
                    tagKey:
                      - 254
                      - 255
                      - 256
                    mainServices:
                      - 處方藥配藥
                      - 藥品諮詢
                      - 零售藥品與健康食品
                    mainServicesKey:
                      - 254
                      - 255
                      - 256
                    mainServiceIcon:
                      - key : 254
                        name: 處方藥配藥
                        icon: bchat-question-outline
                      - key : 255
                        name: 藥品諮詢
                        icon: bchat-question-outline
                      - key : 256
                        name: 零售藥品與健康食品
                        icon: bchat-question-outline
                    services:
                      - 處方藥配藥服務
                      - 藥品信息和用藥建議
                      - 藥物遵從性評估和提醒
                    serviceKey:
                        - 254
                        - 255
                        - 256

  /stores/medicines:
    get:
      summary: 哪裡買藥
      tags:
        - stores
      parameters:
        - in: query
          name: isExact
          schema:
            type: integer
            enum: [0,1]
          description: 藥品使否要完整符合
        - in: query
          name: stockType
          schema:
            type: array
            items:
              type: string
            description: 庫存類型 lv1,lv2,lv3
            example: ['lv1', 'lv2']
        - in: query
          name: permitNo
          schema:
            type: array
            items:
              type: string
            description: 藥品號
            example: []            
        - in: query
          name: district
          explode: true
          schema:
            type: array
            items:
              type: string
          description: 指定行政區
        - in: query
          name: area
          schema:
            type: string
          description: 指定搜尋區域
        - in: query
          name: lat
          schema:
            type: integer
          description: 緯度
        - in: query
          name: lng
          schema:
            type: integer
          description: 經度
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg:
                      type: string
                    coordinate:
                      $ref: '#/components/schemas/CoordinateResponse'
                    data:
                      $ref: '#/components/schemas/StoresMedicineOptionsResponse'
                example:
                  msg : Success
                  coordinate:
                    lat: 22.3530251
                    lng: 113.9628303
                  data:
                    - uuid: bb9ae68e-e856-41cf-85f6-72f7c7a3716e
                      stockType: lv1
                      name: Nextgen
                      address: Anhe Road, Daan District
                      lat: 25.0260285
                      lng: 121.5493852
                      distance: 21
                      contactNumber: 2323232
                      businessHours: 09:00 ~ 18:00
                      website: https://erp-dev.cloudsatlas.com.hk
                      isExcellent: false
                      isGenuine: true
                      collectCount: 0
                      isExact: true
                      drugCount: 2
                      drugs:
                        - permitNo : HK-05357
                          name: ROCALTROL CAP 0.25UG
                        - permitNo : HK-07007
                          name: VENTOLIN INHALER 100MCG/METERED DOSE

  /ad-eyt/list:
    get:
      summary: 獲取 本檔次 要顯示的廣告列表
      security:
        - user_token: []
      tags:
        - ads
      responses:
          '200':
            description: 成功
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    msg:
                      type: string
                    data:
                      type: array
                      items:
                        type: object
                        properties:
                          adType:
                            type: string
                            description: 廣告類型
                            example: home-page-pop-up
                          priority:
                            type: integer
                            description: 優先順序, 數字越大越優先
                            example: 1
                          webImg:
                            type: string
                            description: 網頁版圖片
                            example: https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png
                          appImg:
                            type: string
                            description: 行動版圖片
                            example: https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png
                          targetUrl:
                            type: string
                            description: 目標網址
                            example: https://www.google.com.tw/
                          iframeTag:
                            type: string
                            description: iframe tag
                            example: <iframe src="https://www.google.com.tw/" width="100%" height="100%" frameborder="0" scrolling="no"></iframe>
                          popupTitle:
                            type: string
                            description: 彈窗標題
                            example: 彈窗標題
                          popupContent:
                            type: string
                            description: 彈窗內容
                            example: 彈窗內容

  # ====================
  #
  # other
  #
  /other/coordinates:
    get:
      summary: 地址轉座標
      tags:
        - other
      parameters:
        - $ref: '#/components/parameters/visitor'
        - in: query
          name: address
          schema:
            type: string
          description: 地址
          example: 106台北市大安區安和路二段211號
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: Success
                  data:
                    type: object
                    properties:
                      old:
                        type: string
                        example: 106台北市大安區安和路二段211號
                      address_en:
                        type: string
                        example: No. 211, Section 2, Anhe Rd, Da’an District, Taipei City, Taiwan 106
                      lat:
                        type: number
                        example: 25.0260285
                      lng:
                        type: number
                        example: 121.5504914
